(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{405:function(t,e,a){"use strict";a.r(e);var s=a(14),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"event-listeners"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#event-listeners"}},[t._v("#")]),t._v(" Event listeners")]),t._v(" "),e("p",[t._v("eXo platform includes a mechanism to implement event listeners.\nAn event listener is a component that will be executed following a specific user action or a system event.\nIt is an implementation of the interface "),e("strong",[t._v("org.exoplatform.services.listener.Listener")]),t._v(", and should implement the function onEvent where you can add extra logic to existing functionality.")]),t._v(" "),e("h2",{attrs:{id:"lifecycle-of-an-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle-of-an-event"}},[t._v("#")]),t._v(" Lifecycle of an event")]),t._v(" "),e("p",[t._v("1- User performs an action\n2- A backend service will handle that action, once fulfilled broadcasts an event identified by the event name, with data related to the completed operation\n3- The event listener attached to that event will be fired\n4- You can add as many events as you need for each event")]),t._v(" "),e("h2",{attrs:{id:"create-an-event-listener"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-an-event-listener"}},[t._v("#")]),t._v(" Create an Event listener")]),t._v(" "),e("p",[t._v("There are a list of predefined events in the platform. You will use the login event as an example for this exercise.\nThis section will walk you through a complete sample extension that instructs you how to build your first event listener :")]),t._v(" "),e("ol",[e("li",[t._v("Create a new project based on "),e("a",{attrs:{href:"https://github.com/exo-samples/docs-samples/tree/master/custom-extension",target:"_blank",rel:"noopener noreferrer"}},[t._v("the template"),e("OutboundLink")],1),t._v(" of eXo platform extension")]),t._v(" "),e("li",[t._v("Create a new class LoginEventListener.java under a new package named "),e("strong",[t._v("org.exoplatform.samples.listener")]),t._v(" in "),e("code",[t._v("services")]),t._v(" module :"),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("samples"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listeners")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listener"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listener"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Listener")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExoLogger")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("security"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationRegistry")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token import"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exoplatform"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("security"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationState")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The class LoginEventListener should extend class Listener")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The class Listener takes two parametrized types that will be passed to the event object and be used respectively as :")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1- Event source object")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2- Event data object")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoginEventListener")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Listener")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationRegistry")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Logger object for this Listener")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LOG")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExoLogger")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoginEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onEvent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationRegistry")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Retrieve the source for this event")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationRegistry")]),t._v(" source "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSource")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Retrieve the data of the event")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConversationState")]),t._v(" data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LOG")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"An event was received from {} : The user {} was logged in"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getIdentity")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[t._v("In file "),e("code",[t._v("$EXO_HOME/sources/custom-extension/services/pom.xml")]),t._v(", add needed dependencies :")])]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.exoplatform.kernel"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("exo.kernel.component.common"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("provided"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.exoplatform.core"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("exo.core.component.security.core"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("provided"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Add the needed configuration to activate this listener, and specify the name of the event that it will be listening to, by adding this configuration in file "),e("code",[t._v("configuration.xml")]),t._v(" in "),e("code",[t._v("$EXO_HOME/sources/custom-extension/webapp/src/main/WEB-INF/conf/")]),t._v(" :")])]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- register new event listener that will be fired when a user logs in--\x3e")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("external-component-plugins")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- The service ListenerService registers all listeners with their respective event names --\x3e")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("target-component")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.exoplatform.services.listener.ListenerService"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("target-component")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component-plugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- The event name, it identifies an event, we can have many listeners for the same event --\x3e")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("exo.core.security.ConversationRegistry.register"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- This is the function in ListenerService called to register each new listener --\x3e")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("set-method")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("addListener"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("set-method")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Here you put the FQN of the new listener --\x3e")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.exoplatform.samples.listener.LoginEventListener"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component-plugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("external-component-plugins")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Build the project using Maven :")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$EXO_HOME")]),t._v("/sources/sample-event-listener \n   mvn package\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[t._v("Copy the built jar and war files to their destination folders inside the $EXO_HOME")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" services/target/sample-notification-services.jar "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$EXO_HOME")]),t._v("/lib/sample-notification-services.jar\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" webapp/target/sample-notification-webapp.war "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$EXO_HOME")]),t._v("/webapps\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[t._v("Deploy both files inside the eXo platform container, using the volumes section in "),e("strong",[t._v("docker-compose.yml")]),t._v(" :")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("       volumes:\n         - exo_data:/srv/exo\n         - exo_logs:/var/log/exo\n         - "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$EXO_HOME")]),t._v("/lib/sample-event-listeners.jar:/opt/exo/lib/sample-event-listeners.jar\n         - "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$EXO_HOME")]),t._v("/webapps/event-listeners-webapp.war:/opt/exo/webapps/event-listeners-webapp.war\n")])])]),e("ol",{attrs:{start:"8"}},[e("li",[t._v("Start eXo platform :")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" /path/to/docker-compose.yml up\n")])])]),e("ol",{attrs:{start:"9"}},[e("li",[t._v("If the above steps are successfully applied, you should see a new line in docker logs :")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("exo_1      | 2022-09-28 20:36:23,202 | INFO  | An event was received from class org.exoplatform.services.security.ConversationRegistry : The user haroun was logged in [o.e.samples.listener.LoginEventListener<http-nio-0.0.0.0-8080-exec-2>] \n")])])]),e("h2",{attrs:{id:"list-of-built-in-events"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list-of-built-in-events"}},[t._v("#")]),t._v(" List of built-in events")]),t._v(" "),e("p",[t._v("This is a non exhaustive list of events already present in eXo platform")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Event name")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("exo.core.security.ConversationRegistry.register")]),t._v(" "),e("td",[t._v("A user logs in")])]),t._v(" "),e("tr",[e("td",[t._v("exo.core.security.ConversationRegistry.unregister")]),t._v(" "),e("td",[t._v("A user logs out")])]),t._v(" "),e("tr",[e("td",[t._v("login.failed")]),t._v(" "),e("td",[t._v("A user failed to login")])]),t._v(" "),e("tr",[e("td",[t._v("exo.onlyoffice.editor.opened")]),t._v(" "),e("td",[t._v("OnlyOffice editor opened to edit a document")])]),t._v(" "),e("tr",[e("td",[t._v("share_document_event")]),t._v(" "),e("td",[t._v("A document was shared to a space/user")])]),t._v(" "),e("tr",[e("td",[t._v("rename_file_event")]),t._v(" "),e("td",[t._v("A file was renamed")])]),t._v(" "),e("tr",[e("td",[t._v("exo.automatic-translation.event.translate")]),t._v(" "),e("td",[t._v("A request to translate an activity was sent")])]),t._v(" "),e("tr",[e("td",[t._v("Document.event.TagAdded")]),t._v(" "),e("td",[t._v("A new tag added to a document")])]),t._v(" "),e("tr",[e("td",[t._v("Document.event.TagRemoved")]),t._v(" "),e("td",[t._v("A tag removed from a document")])]),t._v(" "),e("tr",[e("td",[t._v("metadata.tag.added")]),t._v(" "),e("td",[t._v("a new tag added to metadata")])]),t._v(" "),e("tr",[e("td",[t._v("meeds.poll.createPoll")]),t._v(" "),e("td",[t._v("Poll created")])]),t._v(" "),e("tr",[e("td",[t._v("meeds.poll.votePoll")]),t._v(" "),e("td",[t._v("A poll was voted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.created")]),t._v(" "),e("td",[t._v("An event was created")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.poll.created")]),t._v(" "),e("td",[t._v("A poll created for an event")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.updated")]),t._v(" "),e("td",[t._v("an event was updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.poll.voted")]),t._v(" "),e("td",[t._v("A poll for an event gets voted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.poll.dismissed")]),t._v(" "),e("td",[t._v("A vote for an event poll was dismissed")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.poll.voted.all")]),t._v(" "),e("td",[t._v("All participants in an event did vote")])]),t._v(" "),e("tr",[e("td",[t._v("exo.agenda.event.responseSent")]),t._v(" "),e("td",[t._v("A response was sent for an event")])]),t._v(" "),e("tr",[e("td",[t._v("org.exoplatform.web.GenericHttpListener.sessionCreated")]),t._v(" "),e("td",[t._v("new HTTP session was created")])]),t._v(" "),e("tr",[e("td",[t._v("org.exoplatform.web.GenericHttpListener.sessionDestroyed")]),t._v(" "),e("td",[t._v("an HTTP session was destroyed")])]),t._v(" "),e("tr",[e("td",[t._v("dlp.listener.event.detect.item")]),t._v(" "),e("td",[t._v("An item was detected by DLP")])]),t._v(" "),e("tr",[e("td",[t._v("dlp.listener.event.delete.item")]),t._v(" "),e("td",[t._v("An item was deleted by DLP")])]),t._v(" "),e("tr",[e("td",[t._v("dlp.listener.event.restore.item")]),t._v(" "),e("td",[t._v("A deleted item was restored by DLP")])]),t._v(" "),e("tr",[e("td",[t._v("social.metadataItem.created")]),t._v(" "),e("td",[t._v("a new metadata item was created")])]),t._v(" "),e("tr",[e("td",[t._v("social.metadataItem.deleted")]),t._v(" "),e("td",[t._v("a metadata item was deleted")])]),t._v(" "),e("tr",[e("td",[t._v("social.metadataItem.updated")]),t._v(" "),e("td",[t._v("a metadata item was updated")])]),t._v(" "),e("tr",[e("td",[t._v("social.metadataItem.shared")]),t._v(" "),e("td",[t._v("a new metadata item was shared")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wiki.edit")]),t._v(" "),e("td",[t._v("a Notes (aka Wiki) page was updated")])]),t._v(" "),e("tr",[e("td",[t._v("WCMPublicationService.event.updateState")]),t._v(" "),e("td",[t._v("Publication state of a document was updated")])]),t._v(" "),e("tr",[e("td",[t._v("PublicationService.event.postChangeState")]),t._v(" "),e("td",[t._v("Event fired before updating the publication state of a content")])]),t._v(" "),e("tr",[e("td",[t._v("CmsService.event.postCreate")]),t._v(" "),e("td",[t._v("A new content created")])]),t._v(" "),e("tr",[e("td",[t._v("CmsService.event.postEdit")]),t._v(" "),e("td",[t._v("A content is updated")])]),t._v(" "),e("tr",[e("td",[t._v("WebDavService.event.postUpload")]),t._v(" "),e("td",[t._v("A file was uploaded from Webdav connector")])]),t._v(" "),e("tr",[e("td",[t._v("PublicationService.event.postUpdateState")]),t._v(" "),e("td",[t._v("A publication state will be changed")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.FileCreated")]),t._v(" "),e("td",[t._v("A new file was created/uploaded")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.StateChanged")]),t._v(" "),e("td",[t._v("the publication state of a content\\file has been changed")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.PropertyUpdated")]),t._v(" "),e("td",[t._v("a property of a content as updated")])]),t._v(" "),e("tr",[e("td",[t._v("FileActivityNotify.event.PropertyAdded")]),t._v(" "),e("td",[t._v("a content was added a new property")])]),t._v(" "),e("tr",[e("td",[t._v("FileActivityNotify.event.PropertyRemoved")]),t._v(" "),e("td",[t._v("a property of a content was removed")])]),t._v(" "),e("tr",[e("td",[t._v("FileActivityNotify.event.FileRemoved")]),t._v(" "),e("td",[t._v("A file was removed")])]),t._v(" "),e("tr",[e("td",[t._v("FileActivityNotify.event.PropertyUpdated")]),t._v(" "),e("td",[t._v("a property of a content was updated")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.AttachmentAdded")]),t._v(" "),e("td",[t._v("A file was attached to an activity")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.AttachmentRemoved")]),t._v(" "),e("td",[t._v("An attached file was removed from an activity")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.CategoryAdded")]),t._v(" "),e("td",[t._v("A content was added to a Category")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.CategoryRemoved")]),t._v(" "),e("td",[t._v("A content was removed from an activity")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.CommentAdded")]),t._v(" "),e("td",[t._v("A comment was added to an activity")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.CommentUpdated")]),t._v(" "),e("td",[t._v("A comment was updated")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.CommentRemoved")]),t._v(" "),e("td",[t._v("A comment was removed")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.NodeMoved")]),t._v(" "),e("td",[t._v("A content was moved")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.NodeRemoved")]),t._v(" "),e("td",[t._v("A content was removed")])]),t._v(" "),e("tr",[e("td",[t._v("ActivityNotify.event.RevisionChanged")]),t._v(" "),e("td",[t._v("A content revision was restored")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.gamification.postArticle")]),t._v(" "),e("td",[t._v("A new article was posted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.gamification.PublishArticle")]),t._v(" "),e("td",[t._v("A new article was published")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.postArticle")]),t._v(" "),e("td",[t._v("A new article was posted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.updateArticle")]),t._v(" "),e("td",[t._v("An article was updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.deleteArticle")]),t._v(" "),e("td",[t._v("An article was deleted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.viewArticle")]),t._v(" "),e("td",[t._v("An article was viewed")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.shareArticle")]),t._v(" "),e("td",[t._v("An article was shared")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.commentArticle")]),t._v(" "),e("td",[t._v("An article was commented")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.likeArticle")]),t._v(" "),e("td",[t._v("An article was liked")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.archiveArticle")]),t._v(" "),e("td",[t._v("An article was archived")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.unarchiveArticle")]),t._v(" "),e("td",[t._v("An article was un-archived")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.scheduleArticle")]),t._v(" "),e("td",[t._v("An article publication was scheduled")])]),t._v(" "),e("tr",[e("td",[t._v("exo.news.unscheduleArticle")]),t._v(" "),e("td",[t._v("An article publication was unscheduled")])]),t._v(" "),e("tr",[e("td",[t._v("exo.task.taskCreation")]),t._v(" "),e("td",[t._v("A task was created")])]),t._v(" "),e("tr",[e("td",[t._v("exo.task.taskUpdate")]),t._v(" "),e("td",[t._v("A task was updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.task.taskCommentCreation")]),t._v(" "),e("td",[t._v("A task had a new comment")])]),t._v(" "),e("tr",[e("td",[t._v("exo.project.projectModified")]),t._v(" "),e("td",[t._v("A task's project was modified")])]),t._v(" "),e("tr",[e("td",[t._v("exo.task.labelAddedToTask")]),t._v(" "),e("td",[t._v("A label was added to a task")])]),t._v(" "),e("tr",[e("td",[t._v("exo.task.labelDeletedFromTask")]),t._v(" "),e("td",[t._v("A label deleted from a task")])]),t._v(" "),e("tr",[e("td",[t._v("challenge.announcement.activity")]),t._v(" "),e("td",[t._v("A challenge was announced")])]),t._v(" "),e("tr",[e("td",[t._v("exo.gamification.generic.action")]),t._v(" "),e("td",[t._v("A generic action for gamification events")])]),t._v(" "),e("tr",[e("td",[t._v("exo.gamification.domain.action")]),t._v(" "),e("td",[t._v("A generic event for adding/updating/deleting gamification domains")])]),t._v(" "),e("tr",[e("td",[t._v("exo.kudos.activity")]),t._v(" "),e("td",[t._v("A kudos activity was created")])]),t._v(" "),e("tr",[e("td",[t._v("exo.kudos.sent")]),t._v(" "),e("td",[t._v("A kudos was sent")])]),t._v(" "),e("tr",[e("td",[t._v("exo.perkstore.order.createOrModify")]),t._v(" "),e("td",[t._v("An order created/updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.perkstore.product.createOrModify")]),t._v(" "),e("td",[t._v("A Product created/updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.perkstore.settings.modified")]),t._v(" "),e("td",[t._v("The settings of perkstore updated")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.reward.report.success")]),t._v(" "),e("td",[t._v("Rewarding report generated successfully")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.transaction.replaced")]),t._v(" "),e("td",[t._v("A blockchain transaction was replaced by another onEvent")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.addressAssociation.new")]),t._v(" "),e("td",[t._v("the address of the wallet created")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.block.mined")]),t._v(" "),e("td",[t._v("A new block mined in the Blockchain")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.transaction.mined")]),t._v(" "),e("td",[t._v("A transaction was mined in the blockchain")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.transaction.modified")]),t._v(" "),e("td",[t._v("A transaction was modified in the blockchain")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.transaction.sent")]),t._v(" "),e("td",[t._v("A transaction was sent to the blockchain")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.modified")]),t._v(" "),e("td",[t._v("A wallet was modified")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.contract.modified")]),t._v(" "),e("td",[t._v("The blockchain contract was modified")])]),t._v(" "),e("tr",[e("td",[t._v("exo.wallet.deleted")]),t._v(" "),e("td",[t._v("The wallet was deleted")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callCreated")]),t._v(" "),e("td",[t._v("Web conferencing : call created")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callStarted")]),t._v(" "),e("td",[t._v("Web conferencing : call started")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callJoined")]),t._v(" "),e("td",[t._v("Web conferencing : user joined the call")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callLeft")]),t._v(" "),e("td",[t._v("Web conferencing : user left the call")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callStopped")]),t._v(" "),e("td",[t._v("Web conferencing : call stopped")])]),t._v(" "),e("tr",[e("td",[t._v("exo.webconferencing.callRecorded")]),t._v(" "),e("td",[t._v("Web conferencing : call was recorded successfully")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);