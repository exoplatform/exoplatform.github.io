<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Indexing | eXo developers documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="eXo documentation">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.aefff845.css" as="style"><link rel="preload" href="/assets/js/app.566fc5fe.js" as="script"><link rel="preload" href="/assets/js/2.a6004e7f.js" as="script"><link rel="preload" href="/assets/js/1.298b45b6.js" as="script"><link rel="preload" href="/assets/js/33.d786c476.js" as="script"><link rel="prefetch" href="/assets/js/10.225b8ad6.js"><link rel="prefetch" href="/assets/js/11.fcfda894.js"><link rel="prefetch" href="/assets/js/12.8288d633.js"><link rel="prefetch" href="/assets/js/13.61c54a2f.js"><link rel="prefetch" href="/assets/js/14.c8220840.js"><link rel="prefetch" href="/assets/js/15.cf0e000a.js"><link rel="prefetch" href="/assets/js/16.12acf4f0.js"><link rel="prefetch" href="/assets/js/17.60e99e03.js"><link rel="prefetch" href="/assets/js/18.402065f0.js"><link rel="prefetch" href="/assets/js/19.4cde00c8.js"><link rel="prefetch" href="/assets/js/20.e735bd74.js"><link rel="prefetch" href="/assets/js/21.4d9631b7.js"><link rel="prefetch" href="/assets/js/22.38c3a0bb.js"><link rel="prefetch" href="/assets/js/23.96cba659.js"><link rel="prefetch" href="/assets/js/24.6a323bb6.js"><link rel="prefetch" href="/assets/js/25.d314e852.js"><link rel="prefetch" href="/assets/js/26.781556fb.js"><link rel="prefetch" href="/assets/js/27.db2034f7.js"><link rel="prefetch" href="/assets/js/28.bdd32a1a.js"><link rel="prefetch" href="/assets/js/29.7705a494.js"><link rel="prefetch" href="/assets/js/3.535cbfb5.js"><link rel="prefetch" href="/assets/js/30.5235d8d8.js"><link rel="prefetch" href="/assets/js/31.12dc91a0.js"><link rel="prefetch" href="/assets/js/32.7b9193b7.js"><link rel="prefetch" href="/assets/js/34.82a8e2bb.js"><link rel="prefetch" href="/assets/js/35.bfed5ce5.js"><link rel="prefetch" href="/assets/js/36.08aae2f6.js"><link rel="prefetch" href="/assets/js/37.7c5839ea.js"><link rel="prefetch" href="/assets/js/38.5a9c6f81.js"><link rel="prefetch" href="/assets/js/39.64b36a7a.js"><link rel="prefetch" href="/assets/js/4.36aa3fdb.js"><link rel="prefetch" href="/assets/js/40.91490da1.js"><link rel="prefetch" href="/assets/js/41.1bb028a9.js"><link rel="prefetch" href="/assets/js/42.2b2e6226.js"><link rel="prefetch" href="/assets/js/43.3eb1d2ff.js"><link rel="prefetch" href="/assets/js/44.aff75618.js"><link rel="prefetch" href="/assets/js/45.ae4c3883.js"><link rel="prefetch" href="/assets/js/46.c22a02ed.js"><link rel="prefetch" href="/assets/js/47.c2a86641.js"><link rel="prefetch" href="/assets/js/48.49f8e4ff.js"><link rel="prefetch" href="/assets/js/49.ef6e633d.js"><link rel="prefetch" href="/assets/js/5.8d70814d.js"><link rel="prefetch" href="/assets/js/50.82b2cb38.js"><link rel="prefetch" href="/assets/js/51.26af3c19.js"><link rel="prefetch" href="/assets/js/52.f2d45ccb.js"><link rel="prefetch" href="/assets/js/53.ecd43fd3.js"><link rel="prefetch" href="/assets/js/54.17169cc4.js"><link rel="prefetch" href="/assets/js/55.12746217.js"><link rel="prefetch" href="/assets/js/56.77bdaee4.js"><link rel="prefetch" href="/assets/js/57.0b269ef5.js"><link rel="prefetch" href="/assets/js/58.f7328ad9.js"><link rel="prefetch" href="/assets/js/59.5a4f9f04.js"><link rel="prefetch" href="/assets/js/6.477d5345.js"><link rel="prefetch" href="/assets/js/60.30d9251f.js"><link rel="prefetch" href="/assets/js/61.8b948aa3.js"><link rel="prefetch" href="/assets/js/62.5a0f0c07.js"><link rel="prefetch" href="/assets/js/63.e454eff4.js"><link rel="prefetch" href="/assets/js/64.a49d269e.js"><link rel="prefetch" href="/assets/js/65.bfc4b138.js"><link rel="prefetch" href="/assets/js/66.25150fb5.js"><link rel="prefetch" href="/assets/js/67.f5cc4cec.js"><link rel="prefetch" href="/assets/js/68.765560e5.js"><link rel="prefetch" href="/assets/js/69.1b311bba.js"><link rel="prefetch" href="/assets/js/7.75df615e.js"><link rel="prefetch" href="/assets/js/70.1d2c355e.js"><link rel="prefetch" href="/assets/js/71.764ddbf9.js"><link rel="prefetch" href="/assets/js/72.45bf8487.js"><link rel="prefetch" href="/assets/js/73.5834c41d.js"><link rel="prefetch" href="/assets/js/74.981741a8.js"><link rel="prefetch" href="/assets/js/75.60c0af0f.js"><link rel="prefetch" href="/assets/js/76.44b7b182.js"><link rel="prefetch" href="/assets/js/77.d4e20165.js"><link rel="prefetch" href="/assets/js/78.c33db6b5.js"><link rel="prefetch" href="/assets/js/79.c55e2cf6.js"><link rel="prefetch" href="/assets/js/80.3da0ce0e.js"><link rel="prefetch" href="/assets/js/81.09e71458.js"><link rel="prefetch" href="/assets/js/82.d36b7bb4.js"><link rel="prefetch" href="/assets/js/83.102fdcea.js"><link rel="prefetch" href="/assets/js/84.8a64b178.js"><link rel="prefetch" href="/assets/js/85.fed6c251.js"><link rel="prefetch" href="/assets/js/86.70751800.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f3569c9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aefff845.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">eXo developers documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/administration/" class="sidebar-heading clickable router-link-active open"><span>Technical Administration Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/administration/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/administration/database.html" class="sidebar-link">Database</a></li><li><a href="/administration/backup-restore.html" class="sidebar-link">Backup and Restore</a></li><li><a href="/administration/indexing.html" aria-current="page" class="active sidebar-link">Indexing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/administration/indexing.html#elasticsearch" class="sidebar-link">Elasticsearch</a></li><li class="sidebar-sub-header"><a href="/administration/indexing.html#jcr" class="sidebar-link">JCR</a></li></ul></li><li><a href="/administration/LDAP.html" class="sidebar-link">LDAP Integration</a></li><li><a href="/administration/oauth-integration.html" class="sidebar-link">OAuth Integration</a></li><li><a href="/administration/saml-integration.html" class="sidebar-link">SAML Integration</a></li><li><a href="/administration/addons-management.html" class="sidebar-link">Add-ons Management</a></li><li><a href="/administration/security.html" class="sidebar-link">Security</a></li><li><a href="/administration/jmx-rest-management.html" class="sidebar-link">JMX/REST Management</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="indexing"><a href="#indexing" class="header-anchor">#</a> Indexing</h1> <h2 id="elasticsearch"><a href="#elasticsearch" class="header-anchor">#</a> Elasticsearch</h2> <blockquote><p>Elasticsearch is a highly scalable open-source full-text search and analytics engine. It allows you to store, search, and analyze big volumes of data quickly.</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The default Mimetypes list which content is indexed by default: <em>text/., application/ms. , application/vnd.* , application/xml , application/excel , application/powerpoint , application/xls, application/ppt , application/pdf , application/xhtml+xml,application/javascript , application/x-javascript , application/x-jaxrs+groovy , script/groovy</em>
this list can be re-defined in exo.properties file by adding the following parameter</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">exo.unified-search.indexing.supportedMimeTypes</span><span class="token punctuation">=</span><span class="token value attr-value">NEW-LIST</span>
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Max allowed Mimetype file size to be indexed is by default : 20 MB, a new Max size value can be re-defined in exo.properties file by adding the following parameter</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">exo.unified-search.indexing.file.maxSize</span><span class="token punctuation">=</span><span class="token value attr-value">xx</span>
</code></pre></div></div> <p>This chapter covers the following topics:</p> <blockquote><ul><li><code>Elasticsearch Configuration</code> : Configuration for Elasticsearch .</li> <li><code>Elasticsearch Indexing architecture</code> Indexing Architecture</li></ul></blockquote> <h3 id="elasticsearch-configuration"><a href="#elasticsearch-configuration" class="header-anchor">#</a> Elasticsearch Configuration</h3> <p>With the external mode, eXo Platform connects to the external Elasticsearch node or cluster.</p> <ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/plugins/5.6/ingest-attachment.html" target="_blank" rel="noopener noreferrer">Ingest Attachment Processor plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Please check the recommended version of Elasticsearch in <a href="https://www.exoplatform.com/terms-conditions/supported-environments.pdf" target="_blank" rel="noopener noreferrer">eXo supported environments<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <p>Some parameters should be configured for the external mode through <code>exo.properties</code> file:</p> <ul><li><code>exo.es.search.server.url</code>: The URL of the node used for searching.</li> <li><code>exo.es.search.server.username</code>: The username used for BASIC authentication on the Elasticseach node used for searching.</li> <li><code>exo.es.search.server.password</code>: The password used for BASIC authentication on the Elasticseach node used for searching.</li> <li><code>exo.es.index.server.url</code>: The URL of the node used for indexing.</li> <li><code>exo.es.index.server.username</code>: The username used for the BASIC authentication on the Elasticsearch node used for indexing.</li> <li><code>exo.es.index.server.password</code>: The password used for the BASIC authentication on the Elasticsearch node used for indexing.</li></ul> <p>You can find more details about the above parameters, default values and description in <a href="/docs/administration/Configuration.html">Properties reference</a>.</p> <h3 id="elasticsearch-indexing-architecture"><a href="#elasticsearch-indexing-architecture" class="header-anchor">#</a> Elasticsearch Indexing architecture</h3> <h4 id="indexes"><a href="#indexes" class="header-anchor">#</a> Indexes</h4> <p>An index in Elasticsearch is like a table in a relational database. It has a mapping which defines the fields in the index, which are grouped by multiple type. An index is a logical namespace which maps to one or more primary shards and can have zero or more replica shards.</p> <p>Learn more about indexing in Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_basic_concepts.html#_index" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>With eXo Platform and Elasticsearch, an index is dedicated to each application (Wiki, Calendar, Documents...). All the application data (for example wiki application data: wiki, wiki page, wiki attachment) will be indexed in the same index.</p> <h4 id="sharding"><a href="#sharding" class="header-anchor">#</a> Sharding</h4> <p>A shard is a single Lucene instance. It is a low-level worker unit which is managed automatically by Elasticsearch.</p> <p>Learn more about Sharding in Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_basic_concepts.html#_shards_amp_replicas" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>In eXo Platform with Elasticsearch:</p> <ul><li>Sharding will only be used for horizontal scalability.</li> <li>eXo Platform does not use routing policies to route documents or documents type to a specific shard.</li> <li>The default number of shards is 5: the default value of Elasticsearch.</li> <li>This value is configurable per index by setting the parameter <code>shard.number</code> in the constructor parameters of the connectors.</li></ul> <h4 id="replicas"><a href="#replicas" class="header-anchor">#</a> Replicas</h4> <ul><li>Each index can be replicated over the Elasticsearch cluster.</li> <li>The default number of replicas is 1 (the default value of Elasticsearch) which means one replica for each primary shard.</li> <li>This value is configurable per index by setting the parameter <code>replica.number</code> in the constructor parameters of the connectors.</li></ul> <h2 id="jcr"><a href="#jcr" class="header-anchor">#</a> JCR</h2> <blockquote><p>Managing a large data set using JCR in a production environment sometimes requires special operations with indexes stored in a file System. One such maintenance operation, called &quot;re-indexing&quot; consists of recreating an index by re-scanning the data. You usually need to re-index when you observe odd behaviors or many errors in the logs. There can be various reasons to re-index. For example, hardware faults, hard restarts, data corruption, migrations, or simply after an upgrade to enable new features. A re-index is usually requested on server startup or in runtime.
In eXo Platform, there are two kinds of indexes: Elasticsearch and JCR. They have different re-indexing procedures which will be the purpose of the next sections. Match what's below in this chapter:</p> <ul><li><code>Elasticsearch re-indexing</code>How to perform Elasticsearch re-indexing.</li> <li><code>JCR Asynchronous re-indexing</code> How to perform JCR re-indexing.</li></ul></blockquote> <h3 id="jcr-asynchronous-re-indexing"><a href="#jcr-asynchronous-re-indexing" class="header-anchor">#</a> JCR asynchronous re-indexing</h3> <h4 id="indexing-on-start-up"><a href="#indexing-on-start-up" class="header-anchor">#</a> Indexing on start-up</h4> <p>The easiest way to trigger a JCR re-indexing at start-up is to stop the server and manually remove the indexes that need to be recreated. When the server starts, the missing indexes will be detected and the necessary re-indexing operations will begin.</p> <p>JCR supports direct RDBMS re-indexing. This is usually faster than ordinary re-indexing and can be configured via the <code>rdbms-reindexing</code>QueryHandler parameter set to <em>true</em> .</p> <p>The start-up is usually blocked until the indexing process finishes.Block time depends on the amount of persisted data in the repositories. You can resolve this issue by using an asynchronous approach to start-up indexation which involves on performing all operations on indexes in the background without blocking the repository. This approach is controlled by the value of the <code>async-reindexing</code> parameter in <code>QueryHandler configuration</code>. Setting <code>async-reindexing</code> to <strong>true</strong> activates asynchronous indexation and makes JCR start without active indexes. But you can still execute queries on JCR without exceptions and check the index status via <code>QueryManagerImpl</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">boolean</span> online <span class="token operator">=</span>
          <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">QueryManagerImpl</span><span class="token punctuation">)</span><span class="token class-name">Workspace</span><span class="token punctuation">.</span><span class="token function">getQueryManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryHandeler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOnline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>An <strong>OFFLINE</strong> state means that the index is currently recreating. When the state has been changed, the corresponding log event is printed. From the start of the background task, the index is switched to <em>OFFLINE</em>* with the following log event:</p> <div class="language-log extra-class"><pre class="language-log"><code>    <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Setting index OFFLINE <span class="token operator">(</span>repository<span class="token operator">/</span>production<span class="token punctuation">[</span>system<span class="token punctuation">]</span><span class="token operator">)</span><span class="token punctuation">.</span>
</code></pre></div><p>When the process has been finished, two events are logged:</p> <div class="language-log extra-class"><pre class="language-log"><code>    <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Created initial index for <span class="token number">143018</span> nodes <span class="token operator">(</span>repository<span class="token operator">/</span>production<span class="token punctuation">[</span>system<span class="token punctuation">]</span><span class="token operator">)</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Setting index ONLINE <span class="token operator">(</span>repository<span class="token operator">/</span>production<span class="token punctuation">[</span>system<span class="token punctuation">]</span><span class="token operator">)</span><span class="token punctuation">.</span>
</code></pre></div><p>These two log lines indicate the end of process for the workspace given in brackets. Calling <code>isOnline()</code> as mentioned above will also return <strong>true</strong>.</p> <h4 id="hot-asynchronous-workspace-re-indexing-via-jmx"><a href="#hot-asynchronous-workspace-re-indexing-via-jmx" class="header-anchor">#</a> Hot asynchronous workspace re-indexing via JMX</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>First of all, you can not launch hot re-indexing via JMX if the index is already in offline mode. This means that the index is currently invoked in some operations, like re-indexing at start-up, copying in cluster to another node or something else. It is also important to note that hot asynchronous re-indexing via JMX and &quot;on start-up&quot; re-indexing are completely different features. You can not perform start-up re-indexing using the <code>getHotReindexingState</code> command in the JMX interface. However there are some common JMX operations:</p> <ul><li><strong>getIOMode</strong>: return the current index IO mode (READ_ONLY / READ_WRITE), belongs to clustered configuration states.</li> <li><strong>getState</strong>: return the current state (ONLINE / OFFLINE).</li></ul></div> <p>Some hard system faults, errors during upgrades, migration issues and some other factors may corrupt the index. End customers would most likely want the production systems to fix index issues during runtime without delays and restarts. The current version of JCR supports the <strong>Hot Asynchronous Workspace Reindexing</strong> feature. It allows administrators to launch the process in background without stopping or blocking the whole application by using any JMX-compatible console.(See the <strong>JConsole in action</strong> screenshot below).</p> <p><img src="/img/administration/indexing/jmx-jconsole.png" alt="JConsole in action"></p> <p>The server can still work as expected while the index is being recreated. This depends on the flag &quot;allow queries&quot;, which is passed via the JMX interface to invoke the re-indexing operation. If the flag is set to &quot;true&quot;, the application is still working. However, there is one critical limitation that you must be aware of. If the index is frozen while the background task is running, queries are performed on the index present at the moment of task start-up and data written into the repository after start-up will not be available through the search until the process finishes. Data added during re-indexation is also indexed, but will be available only when the task is done. To resume, JCR takes the &quot;snapshot&quot; of indexes on the asynchronous task start-up and uses it for searches. When the operation finishes, the stale indexes are replaced with the new ones, including the newly added data. If the <code>allow queries</code> flag is set to <strong>false</strong>, all queries will throw out an exception while the task is running. The current state can be acquired using the following JMX operation:</p> <ul><li>getHotReindexingState(): return information about latest invocation: start time, if in progress or finish time if done.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/administration/backup-restore.html" class="prev">
        Backup and Restore
      </a></span> <span class="next"><a href="/administration/LDAP.html">
        LDAP Integration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.566fc5fe.js" defer></script><script src="/assets/js/2.a6004e7f.js" defer></script><script src="/assets/js/1.298b45b6.js" defer></script><script src="/assets/js/33.d786c476.js" defer></script>
  </body>
</html>
