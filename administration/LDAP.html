<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LDAP Integration | eXo developers documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="eXo documentation">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.aefff845.css" as="style"><link rel="preload" href="/assets/js/app.566fc5fe.js" as="script"><link rel="preload" href="/assets/js/2.a6004e7f.js" as="script"><link rel="preload" href="/assets/js/1.298b45b6.js" as="script"><link rel="preload" href="/assets/js/26.781556fb.js" as="script"><link rel="prefetch" href="/assets/js/10.225b8ad6.js"><link rel="prefetch" href="/assets/js/11.fcfda894.js"><link rel="prefetch" href="/assets/js/12.8288d633.js"><link rel="prefetch" href="/assets/js/13.61c54a2f.js"><link rel="prefetch" href="/assets/js/14.c8220840.js"><link rel="prefetch" href="/assets/js/15.cf0e000a.js"><link rel="prefetch" href="/assets/js/16.12acf4f0.js"><link rel="prefetch" href="/assets/js/17.60e99e03.js"><link rel="prefetch" href="/assets/js/18.402065f0.js"><link rel="prefetch" href="/assets/js/19.4cde00c8.js"><link rel="prefetch" href="/assets/js/20.e735bd74.js"><link rel="prefetch" href="/assets/js/21.4d9631b7.js"><link rel="prefetch" href="/assets/js/22.38c3a0bb.js"><link rel="prefetch" href="/assets/js/23.96cba659.js"><link rel="prefetch" href="/assets/js/24.6a323bb6.js"><link rel="prefetch" href="/assets/js/25.d314e852.js"><link rel="prefetch" href="/assets/js/27.db2034f7.js"><link rel="prefetch" href="/assets/js/28.bdd32a1a.js"><link rel="prefetch" href="/assets/js/29.7705a494.js"><link rel="prefetch" href="/assets/js/3.535cbfb5.js"><link rel="prefetch" href="/assets/js/30.5235d8d8.js"><link rel="prefetch" href="/assets/js/31.12dc91a0.js"><link rel="prefetch" href="/assets/js/32.7b9193b7.js"><link rel="prefetch" href="/assets/js/33.d786c476.js"><link rel="prefetch" href="/assets/js/34.82a8e2bb.js"><link rel="prefetch" href="/assets/js/35.bfed5ce5.js"><link rel="prefetch" href="/assets/js/36.08aae2f6.js"><link rel="prefetch" href="/assets/js/37.7c5839ea.js"><link rel="prefetch" href="/assets/js/38.5a9c6f81.js"><link rel="prefetch" href="/assets/js/39.64b36a7a.js"><link rel="prefetch" href="/assets/js/4.36aa3fdb.js"><link rel="prefetch" href="/assets/js/40.91490da1.js"><link rel="prefetch" href="/assets/js/41.1bb028a9.js"><link rel="prefetch" href="/assets/js/42.2b2e6226.js"><link rel="prefetch" href="/assets/js/43.3eb1d2ff.js"><link rel="prefetch" href="/assets/js/44.aff75618.js"><link rel="prefetch" href="/assets/js/45.ae4c3883.js"><link rel="prefetch" href="/assets/js/46.c22a02ed.js"><link rel="prefetch" href="/assets/js/47.c2a86641.js"><link rel="prefetch" href="/assets/js/48.49f8e4ff.js"><link rel="prefetch" href="/assets/js/49.ef6e633d.js"><link rel="prefetch" href="/assets/js/5.8d70814d.js"><link rel="prefetch" href="/assets/js/50.82b2cb38.js"><link rel="prefetch" href="/assets/js/51.26af3c19.js"><link rel="prefetch" href="/assets/js/52.f2d45ccb.js"><link rel="prefetch" href="/assets/js/53.ecd43fd3.js"><link rel="prefetch" href="/assets/js/54.17169cc4.js"><link rel="prefetch" href="/assets/js/55.12746217.js"><link rel="prefetch" href="/assets/js/56.77bdaee4.js"><link rel="prefetch" href="/assets/js/57.0b269ef5.js"><link rel="prefetch" href="/assets/js/58.f7328ad9.js"><link rel="prefetch" href="/assets/js/59.5a4f9f04.js"><link rel="prefetch" href="/assets/js/6.477d5345.js"><link rel="prefetch" href="/assets/js/60.30d9251f.js"><link rel="prefetch" href="/assets/js/61.8b948aa3.js"><link rel="prefetch" href="/assets/js/62.5a0f0c07.js"><link rel="prefetch" href="/assets/js/63.e454eff4.js"><link rel="prefetch" href="/assets/js/64.a49d269e.js"><link rel="prefetch" href="/assets/js/65.bfc4b138.js"><link rel="prefetch" href="/assets/js/66.25150fb5.js"><link rel="prefetch" href="/assets/js/67.f5cc4cec.js"><link rel="prefetch" href="/assets/js/68.765560e5.js"><link rel="prefetch" href="/assets/js/69.1b311bba.js"><link rel="prefetch" href="/assets/js/7.75df615e.js"><link rel="prefetch" href="/assets/js/70.1d2c355e.js"><link rel="prefetch" href="/assets/js/71.764ddbf9.js"><link rel="prefetch" href="/assets/js/72.45bf8487.js"><link rel="prefetch" href="/assets/js/73.5834c41d.js"><link rel="prefetch" href="/assets/js/74.981741a8.js"><link rel="prefetch" href="/assets/js/75.60c0af0f.js"><link rel="prefetch" href="/assets/js/76.44b7b182.js"><link rel="prefetch" href="/assets/js/77.d4e20165.js"><link rel="prefetch" href="/assets/js/78.c33db6b5.js"><link rel="prefetch" href="/assets/js/79.c55e2cf6.js"><link rel="prefetch" href="/assets/js/80.3da0ce0e.js"><link rel="prefetch" href="/assets/js/81.09e71458.js"><link rel="prefetch" href="/assets/js/82.d36b7bb4.js"><link rel="prefetch" href="/assets/js/83.102fdcea.js"><link rel="prefetch" href="/assets/js/84.8a64b178.js"><link rel="prefetch" href="/assets/js/85.fed6c251.js"><link rel="prefetch" href="/assets/js/86.70751800.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f3569c9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aefff845.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">eXo developers documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/administration/" class="sidebar-heading clickable router-link-active open"><span>Technical Administration Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/administration/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/administration/database.html" class="sidebar-link">Database</a></li><li><a href="/administration/backup-restore.html" class="sidebar-link">Backup and Restore</a></li><li><a href="/administration/indexing.html" class="sidebar-link">Indexing</a></li><li><a href="/administration/LDAP.html" aria-current="page" class="active sidebar-link">LDAP Integration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/administration/LDAP.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/administration/LDAP.html#quick-start" class="sidebar-link">Quick Start</a></li><li class="sidebar-sub-header"><a href="/administration/LDAP.html#configuration-reference" class="sidebar-link">Configuration reference</a></li><li class="sidebar-sub-header"><a href="/administration/LDAP.html#synchronization-configuration" class="sidebar-link">Synchronization configuration</a></li><li class="sidebar-sub-header"><a href="/administration/LDAP.html#advanced-configuration" class="sidebar-link">Advanced configuration</a></li><li class="sidebar-sub-header"><a href="/administration/LDAP.html#frequently-asked-questions" class="sidebar-link">Frequently asked questions</a></li></ul></li><li><a href="/administration/oauth-integration.html" class="sidebar-link">OAuth Integration</a></li><li><a href="/administration/saml-integration.html" class="sidebar-link">SAML Integration</a></li><li><a href="/administration/addons-management.html" class="sidebar-link">Add-ons Management</a></li><li><a href="/administration/security.html" class="sidebar-link">Security</a></li><li><a href="/administration/jmx-rest-management.html" class="sidebar-link">JMX/REST Management</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ldap-integration"><a href="#ldap-integration" class="header-anchor">#</a> LDAP Integration</h1> <p>eXo Platform organizational entities (users, groups and memberships), can be stored in a database or a directory such as OpenLDAP or Active Directory (AD). This chapter documents how to configure eXo Platform to plug to a directory.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Please notice that this integration is not SSO (Single Sign On). If SSO is what you need, read the <code>SSO chapter</code> that explains how eXo Platform works with a directory through an SSO service like CAS or SAML.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li>eXo Platform supports only the <strong>read-only</strong> mode with a directory (LDAP/AD).</li> <li>Only one single directory is allowed.</li> <li>The mapped organizational entities from directory are imported in one way direction: <strong>from the directory to eXo Platform</strong>.</li></ul></div> <p>This chapter covers the following topics:</p> <blockquote><ul><li><code>Introduction</code>: An introduction about directory server integration.</li> <li><code>Quick start</code> A quick start for eXo Platform configuration with a directory server.</li> <li><code>Configuration reference</code> A reference guide of all available configuration parameters.</li> <li><code>Synchronization Configuration</code> A guide of all available configuration parameters for directory synchronization.</li> <li><code>Advanced configuration</code> A guide about advanced configuration using PicketLink IDM configuration.</li> <li><code>Frequently asked questions</code> How to resolve some possible issues of a directory integration.</li></ul></blockquote> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>eXo Platform can be plugged to a directory server to use its users, groups and memberships:</p> <ul><li>the directory can be plugged in read-only mode only</li> <li>the directory can contain users and groups, or only users</li> <li>the supported directory implementations are: OpenLDAP and Microsoft Active Directory. You can refer to our official <a href="https://www.exoplatform.com/terms-conditions/supported-environments.pdf" target="_blank" rel="noopener noreferrer">supported environments<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> matrix for more details about the supported versions.</li></ul> <p>The term <strong>Directory users</strong> represents users who are created in the directory by its utilities. The term <strong>Platform users</strong> represents users who are created via eXo Platform UI. The understanding is similar for <strong>Directory groups</strong> and <strong>Platform groups</strong>.</p> <h2 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> Quick Start</h2> <p>eXo Platform provides a set of configuration parameters to define the directory integration. These parameters allow to cover most of the directory types and structures. For more complex or specific directories structures, please refer to the chapter <a href="LDAP.AdvancedConfiguration">Advanced configuration</a>.</p> <p>The parameters must be defined in the <code>exo.properties</code> file. The minimal set of parameters to define is:</p> <ul><li><p><strong>exo.ldap.type</strong> - defines the type of directory. Must be <code>ad</code> for Microsoft Active Directory or <code>ldap</code> for any other LDAP directory.</p></li> <li><p><strong>exo.ldap.url</strong> - defines the URL to connect to the directory.</p></li> <li><p><strong>exo.ldap.admin.dn</strong> - defines the full DN of the admin user used to fetch data.</p></li> <li><p><strong>exo.ldap.admin.password</strong> - defines the password of the admin user used to fetch data.</p></li> <li><p><strong>exo.ldap.users.base.dn</strong> - defines the base DN of the users. Multiple DNs can be provided by separating them by semicolons.</p></li> <li><p><strong>exo.ldap.groups.base.dn</strong> - (optional, required only if directory groups must be used) defines the base DN of the groups. Multiple DNs can be provided by separating them by semicolons.
Example:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">exo.ldap.type</span><span class="token punctuation">=</span><span class="token value attr-value">ldap</span>
<span class="token key attr-name">exo.ldap.url</span><span class="token punctuation">=</span><span class="token value attr-value">ldap://my-ldap-server-host:389</span>
<span class="token key attr-name">exo.ldap.admin.dn</span><span class="token punctuation">=</span><span class="token value attr-value">cn=admin,dc=company,dc=com</span>
<span class="token key attr-name">exo.ldap.admin.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
<span class="token key attr-name">exo.ldap.users.base.dn</span><span class="token punctuation">=</span><span class="token value attr-value">ou=users1,dc=company,dc=com;ou=users2,dc=company,dc=com</span>
<span class="token key attr-name">exo.ldap.groups.base.dn</span><span class="token punctuation">=</span><span class="token value attr-value">ou=groups,dc=company,dc=com</span>
</code></pre></div></li></ul> <p>The chapter <a href="#configuration-reference">Configuration reference</a> lists all of available parameters. Please refer to this list to check defaults values of these parameters and define them in the <code>exo.properties</code> file to adapt them to your directory characteristics.</p> <p>Once the parameters are set, the eXo Platform can be started and users and groups will be imported.</p> <h2 id="configuration-reference"><a href="#configuration-reference" class="header-anchor">#</a> Configuration reference</h2> <p>Here is the list of all available configuration properties for directory integration to define in <code>exo.properties</code>:</p> <table><thead><tr><th>Name</th> <th>Description</th> <th>Value</th> <th>Default</th> <th>Example</th></tr></thead> <tbody><tr><td>exo.ldap.type</td> <td>Type of LDAP server</td> <td><code>ldap</code></td> <td>Empty (no LDAP/AD integration)<code>ldap</code> <code>ad</code> or empty</td> <td></td></tr> <tr><td>exo.ldap.url</td> <td>URL to the LDAP/AD server</td> <td>URL</td> <td><a href="http://localhost:389" target="_blank" rel="noopener noreferrer">http://localhost:389<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>ldap://my-ldap-server:389</code></td></tr> <tr><td>exo.ldap.admin.dn</td> <td>Full DN of the admin user used to fetch data</td> <td>String</td> <td>cn=admin</td> <td><code>cn=admin,dc=company,dc=com</code></td></tr> <tr><td>exo.ldap.admin.password</td> <td>Password of the admin user used Sting to fetch data</td> <td>String</td> <td></td> <td></td></tr> <tr><td>exo.ldap.search.timelimit</td> <td>Number of milliseconds that a search may last</td> <td>Any positive number</td> <td>10000</td> <td></td></tr> <tr><td>exo.ldap.search.resultlimit</td> <td>The maximum results that a search can return</td> <td>Any positive number</td> <td>1000</td> <td></td></tr> <tr><td>exo.ldap.users.base.dn</td> <td>Semicolon-separated list of full DNs of the objects containing the users. An empty value means users are not synchronized.</td> <td>String</td> <td><code>ou=users,dc=company,dc=org</code></td> <td><code>ou=users1,dc=exo,dc=org;ou=users2,dc=exo,dc=org</code></td></tr> <tr><td>exo.ldap.users.id.attributeName</td> <td>Attribute used to authenticated the users</td> <td><code>uid</code> for LDAP and <code>sAMAccountName</code> for AD</td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.password.attributeName</td> <td>Attribute used for password for users authentication</td> <td><code>userPassword</code> for LDAP and<code>unicodePwd</code> for AD</td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.filter</td> <td>Filter used to fetch the users</td> <td><code>(&amp;(uid={0})(objectClass=User))</code></td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.{firstNameemail}.mapping</td> <td>Mapping of the mandatory users attributes (firstName, lastName and email)</td> <td><code>cn</code> for LDAP and <code>givenName</code> for AD for firstName, <code>sn</code> for lastName and <code>mail</code> for email</td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.custom.names</td> <td>Comma-separated list of custom users attributes (for example<code>department,city</code>)</td> <td>Empty</td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.{name}.mapping</td> <td>Mapping of the custom user attribute</td> <td>Name of the custom attribute</td> <td></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.{name}.type</td> <td>Type of the custom user attribute</td> <td><code>text</code></td> <td><code>text</code> or <code>binary</code></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.{name}.isRequired</td> <td>Is the attribute required</td> <td><code>false</code></td> <td><code>true</code> or <code>false</code></td> <td></td></tr> <tr><td>exo.ldap.users.attributes.{name}.isMultivalued</td> <td>Is the attribute multi-valued</td> <td><code>false</code></td> <td><code>true</code> or   <code>false</code></td> <td></td></tr> <tr><td>exo.ldap.users.search.scope</td> <td>Scope of the search for users</td> <td><code>subtree</code></td> <td><code>base</code>,  <code>one</code> or <code>subtree</code></td> <td></td></tr> <tr><td>exo.ldap.groups.base.dn</td> <td>Semicolon-separated list of full DNs of the objects containing the groups. An empty value means groups are not synchronized.</td> <td><code>ou=groups,dc=company,dc=org</code></td> <td><code>ou=groups1,dc=org;ou=groups2,dc=org</code></td> <td></td></tr> <tr><td>exo.ldap.groups.id</td> <td>Attribute used to identify the groups</td> <td><code>cn</code></td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.filter</td> <td>Filter used to fetch the groups</td> <td><code>(&amp;(cn={0})(objectClass=Group))</code></td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.attributes.custom.names</td> <td>Comma-separated list of custom groups attributes (for example <code>description,city</code>)</td> <td>Empty</td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.attributes.{name}.mapping</td> <td>Mapping of the custom group attribute</td> <td>Name of the custom attribute</td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.attributes.{name}.type</td> <td>Type of the custom group attribute</td> <td><code>text</code></td> <td><code>text</code> or <code>binary</code></td> <td></td></tr> <tr><td>exo.ldap.groups.attributes.{name}.isRequired</td> <td>Is the attribute required</td> <td><code>false</code></td> <td><code>true</code> or <code>false</code></td> <td></td></tr> <tr><td>exo.ldap.groups.attributes.{name}.isMultivalued</td> <td>Is the attribute multi-valued</td> <td><code>false</code></td> <td><code>true</code> or <code>false</code></td> <td></td></tr> <tr><td>exo.ldap.groups.search.scope</td> <td>Scope of the search for groups</td> <td><code>subtree</code></td> <td><code>base</code>,<code>one</code> or <code>subtree</code></td> <td></td></tr> <tr><td>exo.ldap.groups.parentMembershipAttributeName</td> <td>LDAP attribute that defines children of IdentityObject.Used to retrieved relationships from IdentityObject entry. Option is required if IdentityObject can be part of relationship.</td> <td><code>member</code></td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.isParentMembershipAttributeDN</td> <td>Defines if values of attribute defined in childMembershipAttributeName are fully qualified LDAP DNs.</td> <td><code>false</code></td> <td><code>true</code> or   <code>true</code></td> <td></td></tr> <tr><td>exo.ldap.groups.childMembershipAttributeName</td> <td>LDAP attribute that defines parents of IdentityObject. Used to retrieved relationships from IdentityObject entry. Good example of such attribute in LDAP schema is <code>memberOf</code>.</td> <td></td> <td></td> <td></td></tr> <tr><td>exo.ldap.groups.childMembershipAttributeDN</td> <td>Defines if values of attribute defined in childMembershipAttributeName are fully qualified LDAP DNs.</td> <td><code>true</code> or <code>false</code></td> <td><code>false</code></td> <td></td></tr> <tr><td>exo.ldap.groups.rootGroup</td> <td>Root group to bind LDAP/AD groups, all LDAP/AD groups will id, ending be available under this group.  with <code>/</code> It must end with <code>/</code>. Root group (&quot;/&quot;) cannot be used.</td> <td>Any group</td> <td><code>/platform/*</code></td> <td></td></tr></tbody></table> <p>LDAP/AD connection pool can also be customized in the <code>exo.properties</code> file using <a href="https://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html" target="_blank" rel="noopener noreferrer">JVM standard system properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="synchronization-configuration"><a href="#synchronization-configuration" class="header-anchor">#</a> Synchronization configuration</h2> <p>The LDAP integration uses jobs to synchronize periodically the eXo internal database with the data modified in the LDAP. The periodicity of these jobs can be changed in the <code>exo.properties</code> file thanks to the following properties:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">  # Cron expression used to schedule the job that will import periodically data</span>
<span class="token comment">  # from external store</span>
<span class="token comment">  # (Default value = every ten minutes)</span>
<span class="token key attr-name">  exo.idm.externalStore.import.cronExpression</span><span class="token punctuation">=</span><span class="token value attr-value">0 */10 * ? * *</span>
<span class="token comment">  # Cron expression used to schedule the job that will delete periodically data</span>
<span class="token comment">  # from internal store that has been deleted from external store</span>
<span class="token comment">  # (Default value = every day at 23:59 PM)</span>
<span class="token key attr-name">  exo.idm.externalStore.delete.cronExpression</span><span class="token punctuation">=</span><span class="token value attr-value">0 59 23 ? * *</span>
<span class="token comment">  # Cron expression used to schedule the job that will process periodically data</span>
<span class="token comment">  # injected in queue</span>
<span class="token comment">  # (Default value = every minute)</span>
<span class="token key attr-name">  exo.idm.externalStore.queue.processing.cronExpression</span><span class="token punctuation">=</span><span class="token value attr-value">0 */1 * ? * *</span>
<span class="token comment">  # When users are removed from LDAP/AD or are not retrievable for other reasons (Communication failure, LDAP Filter modified), </span>
<span class="token comment">  # we have two options, either they are removed or they are disabled from the internal store.</span>
<span class="token comment">  # exo.idm.externalStore.entries.missing.delete=true (Default behavior, if value is equal to true users are removed)</span>
<span class="token comment">  # exo.idm.externalStore.entries.missing.delete=false (if value is equal to true users are disabled)</span>
<span class="token key attr-name">  exo.idm.externalStore.entries.missing.delete</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre></div><p>By default, user data are synchronized with the LDAP when he/she signs in. This can be disabled by modifying this property:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">  # if true, update user data on login time and only when information change</span>
<span class="token comment">  # on external store (Default: true)</span>
<span class="token key attr-name">  exo.idm.externalStore.update.onlogin</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre></div><p>The user data sync tasks (one per user) are executed asynchronously via a queue. If a sync task fails, it can be retried. The maximum number of sync retries before the task is abandoned in error can be configured by changing the following property:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">  # Max retries to process Data synchronization from queue</span>
<span class="token key attr-name">  exo.idm.externalStore.queue.processing.error.retries.max</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
</code></pre></div><h2 id="advanced-configuration"><a href="#advanced-configuration" class="header-anchor">#</a> Advanced configuration</h2> <p>If configuration properties described in the previous chapters are not sufficient, eXo Platform allows to configure directory integration even more finely. eXo Platform uses <a href="http://picketlink.org/" target="_blank" rel="noopener noreferrer">PicketLink IDM framework<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that allows a very flexible integration with a directory server. The PicketLink configuration can be directly updated.</p> <p>The following section is a step-by-step tutorial to integrate eXo Platform with a directory server using Picketink configuration. If you want to know more about PicketLink IDM configuration, you can refer to the official documentation of PicketLink.</p> <p>This chapter covers the following topics:</p> <blockquote><ul><li><code>Quick start</code> A step by step tutorial for eXo Platform configuration with a directory server using PicketLink.</li> <li><code>How to map multiple DNs for users?</code> A step by step tutorial to map multiple DNs for users from your directory to eXo Platform.</li> <li><code>How to change default mandatory users attributes mapping?</code> A step by step tutorial to map default users attributes.</li> <li><code>How to map additional user attributes?</code> A step by step tutorial to map additional users attributes than the default ones.</li> <li><code>How to map multiple DNs for groups?</code> A tutorial allowing to map multiple DNs for groups from your directory to eXo platform.</li> <li><code>How to map directory groups to a new eXo Platform group?</code> A tutorial allowing to map your directory groups to new eXo platform groups.</li> <li><code>Configuration reference</code> A reference guide about PicketLink IDM configuration and eXO Platform configuration.</li></ul></blockquote> <h3 id="quick-start-2"><a href="#quick-start-2" class="header-anchor">#</a> Quick start</h3> <p>Through this tutorial, you will be able to integrate eXo Platform with a populated directory server. We suppose that your directory server has a structure similar to the following one:</p> <p><img src="/img/administration/LDAP/ldap_integration.png" alt="image0"></p> <p>In this quick start, you configure eXo Platform to read information of users and groups from the directory. It might not match your need exactly, but after this start you will have everything packaged in an extension, that you can adapt by following the following sections.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The ldap-extension is technically a portal extension that is described in <code>Developer guide</code>, but it does not require compilation as it requires only xml files, so administrators can pack the war archive without using a Maven build. If you are a developer, you can create a Maven project for it like any other extension.</p></div> <ol><li><p>Create a <code>ldap-extension</code> directory having this structure:</p> <div class="language-text extra-class"><pre class="language-text"><code>  ldap-extension
  |__ META-INF
          |__ exo-conf
                  |__ configuration.xml
  |__ WEB-INF
          |__ conf
                  |__ configuration.xml
                  |__ organization
                          |__ idm-configuration.xml
                          |__ picketlink-idm-ldap-config.xml
          |__ web.xml
</code></pre></div></li> <li><p>Edit <code>WEB-INF/conf/configuration.xml</code>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.exoplatform.org/xml/ns/kernel_1_3.xsd   http://www.exoplatform.org/xml/ns/kernel_1_3.xsd<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.exoplatform.org/xml/ns/kernel_1_3.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span><span class="token punctuation">&gt;</span></span>war:/conf/organization/idm-configuration.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>import</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>Copy content of the <code>portal.war!/WEB-INF/conf/organization/idm-configuration.xml</code> file of eXo Platform to your <code>idm-configuration.xml</code> file, then edit your file to replace:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>war:/conf/organization/picketlink-idm/picketlink-idm-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>with the path to your <code>picketlink-idm-ldap-config.xml</code> file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>war:/conf/organization/picketlink-idm-ldap-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>Copy content from one of PicketLink sample files to your <code>picketlink-idm-ldap-config.xml</code> file.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The sample files can be found in,<code>portal.war!/WEB-INF/conf/organization/picketlink-idm</code>. Choose either of the following files:</p> <ul><li><code>picketlink-idm-msad-config.xml</code> if you use MS Active Directory.</li> <li><code>picketlink-idm-ldap-config.xml</code> for OpenLDAP and other LDAP compliant directories.</li></ul></div></li> <li><p>Modify the <code>picketlink-idm-ldap-config.xml</code> file according to your directory setup. Most of the time, the following parameters need to be changed:</p> <ul><li>all the DNs locating the users and groups:
<ul><li><strong>ctxDNs</strong> of the USER identity object, which must be the root DN of the users.</li> <li><strong>ctxDNs</strong> of the platform_type identity object, which must be the root DN of the groups mapped under the eXo Platform /platform group.</li> <li><strong>ctxDNs</strong> of the organization_type identity object, which must be the root DN of the groups mapped under the eXo Platform /organization group</li></ul></li> <li>providerURL</li> <li>adminDN</li> <li>adminPassword</li></ul></li> <li><p><strong>For Microsoft Active Directory (MSAD)</strong>; do the following sub-steps :</p> <ol><li><p>Prepare a truststore file containing the valid certificate for MSAD. It can be generated by the Linux command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>  keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-file</span>  certificate <span class="token parameter variable">-keystore</span> truststore

</code></pre></div></li> <li><p>Edit the following parameters in the <code>picketlink-idm-ldap-config.xml</code> file:</p></li></ol> <ul><li><p>providerURL: Should use SSL (<a href="/administration/ldaps://">ldaps://</a>).</p></li> <li><p>customSystemProperties: Give your truststore file path and password.</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>customSystemProperties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>javax.net.ssl.trustStore=/path/to/msad.truststore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>javax.net.ssl.trustStorePassword=password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p>Add the following entries in the <code>idm-configuration.xml</code> file:</p> <ul><li><p>groupTypeMappings</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/platform/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>platform_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/organization/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>organization_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>ignoreMappedMembershipTypeGroupList</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/platform/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/organization/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <p>This step enables mapping of directory groups (platform and organization - that are predefined groups) to eXo Platform. If you bypass this step, only user mapping is performed.</p></li> <li><p>Configure your extension by following the steps 3, 4 and 5 of <code>Creating a portal extension&gt;</code></p></li> <li><p>Package and deploy your ldap-extension into Platform.</p></li> <li><p>Make sure the directory server is running, then start eXo Platform.</p></li> <li><p>Packaging and deploying</p></li></ol> <p>The extension folder must be packaged into <code>ldap-extension.war</code> then copied to <code>$PLATFORM_TOMCAT_HOME/webapps</code>.</p> <p>To compress the folder into a .war (and decompress the .war for editing), you can use any archiver tool that supports .war extension.
You can use the JDK built-in tool <strong>jar</strong>, as follows:</p> <ul><li><p>To compress, first go to <strong>inside</strong> ldap-extension directory:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>   <span class="token builtin class-name">cd</span> ldap-extension
   jar cvf path/to/save/ldap-extension.war *
</code></pre></div></li> <li><p>To decompress, run: <code>jar xvf path/to/ldap-extension.war</code></p></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Do not include the ldap-extension folder itself into the <code>.war.</code> The <code>.war</code> should contain META-INF and WEB-INF folders at root of the archive, it should not contain ldap-extension folder. That's why you need to go to inside the folder first.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You should have ldap-extension packaged in .war when deploying it to production. However when testing, if you feel uncomfortable having to edit a .war, you can skip compressing it. In <a href="https://tomcat.apache.org/tomcat-8.0-doc/deployer-howto.html" target="_blank" rel="noopener noreferrer">Tomcat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, just deploy the original folder <em>ldap-extension</em>.</p></div> <h4 id="testing"><a href="#testing" class="header-anchor">#</a> Testing</h4> <p>If the integration was successful, the directory users and groups will appear in eXo Platform under the menu <strong>Administration --&gt; Organization --&gt; Users</strong> and <strong>Administration --&gt; Organization --&gt; Groups</strong>.</p> <h3 id="how-to-map-multiple-dns-for-users"><a href="#how-to-map-multiple-dns-for-users" class="header-anchor">#</a> How to map multiple DNs for users?</h3> <p>eXo Platform allows to map users dispatched in multiple directory DNs, like this:</p> <p><img src="/img/administration/LDAP/ldap_user.png" alt="image1"></p> <p>In such case, you should, in addition to previous steps described in the <code>Quick start section</code>, follow these steps:</p> <ol><li><p>Open the configuration file <code>picketlink-idm-ldap-config.xml</code>.</p></li> <li><p>Search for the option <strong>ctxDNs</strong>.</p></li> <li><p>Define the different locations of DNs where your directory users are located:</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>ctxDNs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ou=People,o=acme,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ou=People,o=emca,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Since only one type of user can be defined, all users of these DNs must share the same attributes mapping.</p> <h3 id="how-to-change-default-mandatory-users-attributes-mapping"><a href="#how-to-change-default-mandatory-users-attributes-mapping" class="header-anchor">#</a> How to change default mandatory users attributes mapping?</h3> <p>There are five attributes that <strong>should always be mapped</strong> (because they are mandatory in eXo Platform):</p> <ul><li>username</li> <li>password</li> <li>firstname</li> <li>lastname</li> <li>email</li></ul> <p>The username mapping is defined by the option <code>idAttributeName</code>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>idAttributeName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The password mapping is defined by the option <code>passwordAttributeName</code>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>passwordAttributeName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The firstname, lastname and email mapping are defined in user attributes:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>firstName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span><span class="token punctuation">&gt;</span></span>givenName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>lastName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span><span class="token punctuation">&gt;</span></span>sn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span><span class="token punctuation">&gt;</span></span>mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
    …
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The default mapping defined in the provided sample configuration files for OpenLDAP and MS AD directories is summarized in the following table:</p> <table><thead><tr><th>eXo Platform</th> <th>Configuration attribute</th> <th>OpenLDAP default value</th> <th>MSAD default value</th></tr></thead> <tbody><tr><td>username</td> <td>Option <code>idAttributeName</code></td> <td>uid</td> <td>cn</td></tr> <tr><td>password</td> <td>Option <code>passwordAttributeName</code></td> <td>userPassword</td> <td>unicodePwd</td></tr> <tr><td>firstname</td> <td>Attribute <code>firstName</code></td> <td>cn</td> <td>givenname</td></tr> <tr><td>lastname</td> <td>Attribute <code>lastName</code></td> <td>sn</td> <td>sn</td></tr> <tr><td>mail</td> <td>Attribute <code>email</code></td> <td>mail</td> <td>mail</td></tr></tbody></table> <p>You can update them in the file picketlink-idm-ldap-config.xml to match your specific mapping.</p> <h3 id="how-to-map-additional-user-attributes"><a href="#how-to-map-additional-user-attributes" class="header-anchor">#</a> How to map additional user attributes?</h3> <p>As described in the previous section, by default, only 5 attributes are mapped from a directory user to an eXo Platform user. Additional user attributes can be mapped by configuration by adding new <code>attribute</code> element in the <code>attributes</code> section of the USER identity object type. For example if you want to map a directory attribute <em>title</em> to eXo Platform attribute <em>user.jobtitle</em>, you must add this configuration snippet under the &quot;attributes&quot; tag in the file <code>picketlink-idm-ldap-config.xml</code>, as follows:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attributes</span><span class="token punctuation">&gt;</span></span>
...
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>user.jobtitle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span><span class="token punctuation">&gt;</span></span>title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isRequired</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isRequired</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isMultivalued</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isMultivalued</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isUnique</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isUnique</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
...
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attributes</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>These attributes can be retrieved in the Portal User Profile with the Java API:</p> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>exoplatform<span class="token punctuation">.</span>container<span class="token punctuation">.</span></span><span class="token class-name">ExoContainerContext</span></span><span class="token punctuation">;</span>
     <span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>exoplatform<span class="token punctuation">.</span>services<span class="token punctuation">.</span>organization<span class="token punctuation">.</span></span><span class="token class-name">OrganizationService</span></span><span class="token punctuation">;</span>
     <span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>exoplatform<span class="token punctuation">.</span>services<span class="token punctuation">.</span>organization<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
     <span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>exoplatform<span class="token punctuation">.</span>services<span class="token punctuation">.</span>organization<span class="token punctuation">.</span></span><span class="token class-name">UserProfile</span></span><span class="token punctuation">;</span>

     <span class="token class-name">OrganizationService</span> organizationService <span class="token operator">=</span> <span class="token class-name">ExoContainerContext</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token class-name">OrganizationService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;mary&quot;</span><span class="token punctuation">;</span>
     <span class="token class-name">UserProfile</span> userProfile <span class="token operator">=</span> organizationService<span class="token punctuation">.</span><span class="token function">getUserProfileHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findUserProfileByName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">String</span> jobTitle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> userProfile<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user.jobtitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
</code></pre></div><h3 id="how-to-map-multiple-dns-for-groups"><a href="#how-to-map-multiple-dns-for-groups" class="header-anchor">#</a> How to map multiple DNs for groups?</h3> <p>As in previous sections, we assume that you already have a populated directory and some groups that should be mapped into eXo Platform.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>To be clear about the LDAP &quot;group&quot;, it should be the &quot;groupOfNames&quot; objectClass in OpenLDAP or &quot;group&quot; objectClass in Active Directory. In OpenLDAP (default core.schema), the groupOfNames must have the member attribute.</p></div> <p>Under the context DN (ou=Groups,o=acme,dc=example,dc=com), there are several groups as shown in the diagram below:</p> <p><img src="/img/administration/LDAP/GroupsDNs.png" alt="Group DNs"></p> <p>In this case, you should, in addition to previous steps described in the <code>Quick start section</code>, follow these steps:</p> <ol><li><p>Open the configuration file <code>picketlink-idm-ldap-config.xml</code>.</p></li> <li><p>Search for the option ctxDNs to define the multiple locations of DNs where your directory groups are located:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>ctxDNs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ou=Groups,o=acme,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ou=Groups,o=emca,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="how-to-map-directory-groups-to-a-new-exo-platform-group"><a href="#how-to-map-directory-groups-to-a-new-exo-platform-group" class="header-anchor">#</a> How to map directory groups to a new eXo Platform group?</h3> <p>In the <code>Quick start chapter</code> we map the directory groups to default eXo Platform groups <code>/platform</code> and <code>/organization</code>. In this chapter we will learn how to map directory groups into a new eXo Platform group. Let's say we want to map the groups contained in the directory <code>DN o=acme,dc=example,dc=com</code> into the eXo Platform group <code>/acme</code>. As a prerequisite, the group /acme must be already created in eXo Platform.</p> <ol><li><p>PicketLink configuration</p> <p>The first step is to define the mapping configuration in PicketLink configuration file <code>picketlink-idm-ldap-config.xml</code> by adding a new identity object type (we call it acme_groups_type) under the identity store PortalLDAPStore:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>supported-identity-object-types</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>acme_groups_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relationships</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relationship</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relationship-type-ref</span><span class="token punctuation">&gt;</span></span>JBOSS_IDENTITY_MEMBERSHIP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relationship-type-ref</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type-ref</span><span class="token punctuation">&gt;</span></span>USER<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type-ref</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relationship</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relationship</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relationship-type-ref</span><span class="token punctuation">&gt;</span></span>JBOSS_IDENTITY_MEMBERSHIP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relationship-type-ref</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type-ref</span><span class="token punctuation">&gt;</span></span>acme_groups_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type-ref</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relationship</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relationships</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>credentials</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attributes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>description<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span><span class="token punctuation">&gt;</span></span>description<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isRequired</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isRequired</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isMultivalued</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isMultivalued</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>isReadOnly</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>isReadOnly</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attributes</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>options</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>idAttributeName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>cn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>ctxDNs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>o=acme,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>entrySearchFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[(&amp;(cn={0})(objectClass=group))]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>allowCreateEntry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>parentMembershipAttributeName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>member<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>isParentMembershipAttributeDN<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>allowEmptyMemberships<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>createEntryAttributeValues<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>objectClass=top<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>objectClass=group<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>groupType=8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>options</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>supported-identity-object-types</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Make sure that the attributes and options are correct, especially:</p> <ul><li>idAttributeName : attribute name to use as the group id.</li> <li>ctxDNs: base DN of the groups in the directory.</li> <li><strong>entrySearchFilter</strong>: search expression to filter objects to consider as groups.</li> <li><strong>parentMembershipAttributeName</strong>: attribute which holds the list of group members. In OpenLDAP or MSAD default schemas, the member attribute is used, but your schema may use another attribute.</li></ul></div></li></ol> <p>Then this new object type must be referenced in the PortalRepository
repository:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalRepository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
   ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-types</span><span class="token punctuation">&gt;</span></span>
           ...
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>acme_groups_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
           ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-types</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>...
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
  ```

2. eXo configuration

  Besides the `PicketLink configuration`, the eXo service configuration defined in the file `idm-configuration.xml` must be updated. A new entry must be added in the fields `groupTypeMappings` and `ignoreMappedMembershipTypeGroupList` to map the group defined in PicketLink configuration with the eXo Platform group, as follows:
   ``` xml
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>org.exoplatform.services.organization.OrganizationService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        ...
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>groupTypeMappings<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.HashMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    ..
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/acme/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>acme_groups_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
            ...
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ignoreMappedMembershipTypeGroupList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.ArrayList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>/acme/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                    ...
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
   ```

### Advanced Configuration reference

This section is a complete description of the available configuration options. It lists the options of both eXo configuration and PicketLink configuration.

#### eXo configuration

The eXo configuration related to PicketLink integration is defined in these 2 services:

- `org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl`
- `org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl`

You can adapt the configuration by updating these services configuration in the file `idm-configuration.xml` as described in the `Quick Start section`

##### PicketLinkIDMServiceImpl service

This service has the following parameters:

- **config** (value-param): location of the PicketLink IDM configuration file.

  ``` xml
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>org.exoplatform.services.organization.idm.PicketLinkIDMService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-params</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value-param</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>war:/conf/organization/picketlink-idm-ldap-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
          ...
  ```

  ::: tip
  The &quot;war:&quot; prefix allows to lookup the given location in all deployed
  webapps.
  :::

- **hibernate.properties** (properties-param): list of hibernate properties used to create SessionFactory that will be injected in Picketlink IDM configuration registry.

  ``` xml
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties-param</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hibernate.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Default Hibernate Service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.hbm2ddl.auto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.show_sql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.connection.datasource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${gatein.idm.datasource.name}${container.name.suffix}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.connection.autocommit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          ....
          ....
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.listeners.envers.autoRegister<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties-param</span><span class="token punctuation">&gt;</span></span>
  ```

- **hibernate.annotations**: list of annotated classes that will be added to Hibernate configuration.
- **hibernate.mappings**: list of .xml files that will be added to the hibernate configuration as mapping files.
- **jndiName** (value-param): if the \'config\' parameter is not provided, this parameter will be used to perform the JNDI lookup for IdentitySessionFactory.
- **portalRealm** (value-param): the realm name that should be used to obtain the proper IdentitySession. The default value is **PortalRealm**.

  ``` xml
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value-param</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>portalRealm<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>idm_realm${container.name.suffix}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value-param</span><span class="token punctuation">&gt;</span></span>
  ```

##### PicketLinkIDMOrganizationServiceImpl service

This service has the following parameters defined as fields of `object-param` of type `org.exoplatform.services.organization.idm.Config`:

- **rootGroupName** : the name of the PicketLink IDM Group that will be used as a root parent. The default is `GTN_ROOT_GROUP`.
- **defaultGroupType**: the name of the PicketLink IDM GroupType that will be used to store groups. The default is `GTN_GROUP_TYPE`.
- **groupTypeMappings** : this parameter maps groups added with eXo Platform API as children of a given group ID, and stores them with a given group type name in PicketLink IDM. If the parent ID ends with \&quot;/\*\&quot;, all child groups will have the mapped group type. Otherwise, only direct (first level) children will use this type. This can be leveraged by LDAP if the LDAP DN is configured in PicketLink IDM to only store a specific group type. This will then store the given branch in the eXo Platform group tree, while all other groups will remain in the database.
- **forceMembershipOfMappedTypes**: groups stored in PicketLink IDM with a type mapped in \'groupTypeMappings\' will automatically be members under the mapped parent. The Group relationships linked by the PicketLink IDM group association will not be necessary. This parameter can be set to false if all groups are added via eXo Platform APIs. This may be useful with the LDAP configuration when being set to true, it will make every entry added to LDAP appear in eXo Platform. This, however, is not true for entries added via eXo Platform management UI.
- **ignoreMappedMembershipType**: if \&quot;associationMembershipType\&quot; option is used, and this option is set to true, Membership with MembershipType configured to be stored as PicketLink IDM association will not be stored as PicketLink IDM Role.
- **associationMembershipType** : if this option is used, each Membership created with MembrshipType that is equal to the value specified here, will be stored in PicketLink IDM as the simple Group-User association.
- **passwordAsAttribute**: this parameter specifies if a password should be stored using the PicketLink IDM Credential object or as a plain attribute. The default value is set to false.
- **useParentIdAsGroupType**: this parameter stores the parent ID path as a group type in PicketLink IDM for any IDs not mapped with a specific type in \'groupTypeMappings\'. If this option is set to false, and no mappings are provided under \'groupTypeMappings\', only one group with the given name can exist in the eXo Platform group tree.
- **pathSeparator**: when \'userParentIdAsGroupType\' is set to true, this value will be used to replace all \&quot;/\&quot; characters in IDs. The \&quot;/\&quot; character is not allowed in the group type name in PicketLink IDM.

#### PicketLink IDM configuration file

Let's see the `picketlink-idm-ldap-config.xml` structure:

``` xml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>realms</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>realms</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalRepository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>DefaultPortalRepository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stores</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-stores</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>HibernateStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-stores</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stores</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Realm</strong>: identity realm used. This parameter must not be changed.</li> <li><strong>Repository</strong>: Where your store and identity object type is used, by Id reference.</li> <li><strong>Store</strong>: The center part of this guideline, where you configure the directory connection, identity object types and all the attributes mapping.</li></ul> <p>With the aim of making this guideline easy to understand, <strong>DefaultPortalRepository</strong> and <strong>HibernateStore</strong> will be excluded since they must not be re-configured, and the id references will be added. Also, <code>organization_type</code> is eliminated because of its similarity to <code>platform_type</code>. The structure is re-drawn as follows:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalRepository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-mappings</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-types</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>USER<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>platform_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-types</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-mappings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stores</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-stores</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>supported-identity-object-types</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>USER<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!-- attributes &amp; options --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>platform_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!-- attributes &amp; options --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>supported-identity-object-types</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-stores</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stores</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="the-directory-connection"><a href="#the-directory-connection" class="header-anchor">#</a> The directory connection</h5> <p>The directory connection (URL and credentials) is Store configuration.
It is provided in the <em>PortalLDAPStore</em>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>options</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>providerURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ldap://localhost:389<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>adminDN<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>cn=admin,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>adminPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>options</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="read-only-mode"><a href="#read-only-mode" class="header-anchor">#</a> Read-only mode</h5> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It is the only supported mode.</p></div> <p>The Read-only mode is a repository configuration. It is an option of the repository that prevents eXo Platform from writing to the directory. You should ensure to enable the read-only mode by setting the option to true:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>PortalRepository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-mappings</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>PortalLDAPStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>options</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>readOnly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>options</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-store-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="search-scope-entrysearchscope-option"><a href="#search-scope-entrysearchscope-option" class="header-anchor">#</a> Search scope (entrySearchScope option)</h5> <p>The <em>entrySearchScope</em> option can be placed in identity object type, like this:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>entrySearchScope<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>subtree<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In combination with <em>ctxDNs</em>, this option forms an LDAP query. It is equivalent to the <em>scope</em> parameter of the ldapsearch command (-s in OpenLDAP).</p> <ul><li><p><strong>Values</strong>: subtree, object.</p></li> <li><p>If the option is omitted, the search will return the children at level 1 of the ctxDNs - equivalent to <code>-s one</code>.</p></li> <li><p>Use <code>subtree</code> to search in the entire tree under ctxDNs. It is useful saving you from having to provide all the possible ctxDNs in configuration.</p></li> <li><p>The <code>object</code> value is equivalent to <code>-s base</code> that examines only the ctxDNs itself. If the ctxDNs entry does not match the filter, the search result is zero.</p> <div class="language-text extra-class"><pre class="language-text"><code>      # o=acme,dc=example,dc=com
      # uid=user1,o=acme,dc=example,dc=com
      # ou=People,o=acme,dc=example,dc=com
      # uid=user2,ou=People,o=acme,dc=example,dc=com
</code></pre></div></li></ul> <p>Assume you are mapping the LDAP users in the tree above, using the ctxDNs = <strong>o=acme,dc=example,dc=com</strong>, then:</p> <ul><li><code>subtree</code>: user1 and user2 are mapped.</li> <li><code>object</code>: no user is mapped.</li> <li>If omitted: only user1 is mapped.</li></ul> <h5 id="platform-user-attributes"><a href="#platform-user-attributes" class="header-anchor">#</a> Platform user attributes</h5> <p>The list of Platform user attribute names (the asterisk (*) marks a mandatory attribute):</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td><em>username (*)</em></td> <td>user id (login name)</td></tr> <tr><td><em>firstName (*)</em></td> <td>first name</td></tr> <tr><td><em>lastName (*)</em></td> <td>last name</td></tr> <tr><td><em>displayName</em></td> <td>display name</td></tr> <tr><td><em>email (*)</em></td> <td>email (unique, &lt;user1@example.com&gt;)</td></tr> <tr><td><em>user.name.given</em></td> <td>given name</td></tr> <tr><td><em>user.name.family</em></td> <td>family name</td></tr> <tr><td><em>user.name.nickName</em></td> <td>nick name</td></tr> <tr><td><em>user.bdate</em></td> <td>birth day</td></tr> <tr><td><em>user.gender</em></td> <td>&quot;Male/Female&quot;</td></tr> <tr><td><em>user.employer</em></td> <td>employer</td></tr> <tr><td><em>user.department</em></td> <td>department</td></tr> <tr><td><em>user.jobtitle</em></td> <td>job title</td></tr> <tr><td><em>user.language</em></td> <td>language</td></tr> <tr><td><em>user.home-info.postal.name</em></td> <td>personal address</td></tr> <tr><td><em>user.home-info.postal.street</em></td> <td>personal address</td></tr> <tr><td><em>user.home-info.postal.city</em></td> <td>personal address</td></tr> <tr><td><em>user.home-info.postal.stateprov</em></td> <td>personal address</td></tr> <tr><td><em>user.home-info.postal.postalcode</em></td> <td>personal postal code</td></tr> <tr><td><em>user.home-info.postal.country</em></td> <td>personal postal country</td></tr> <tr><td><em>user.home-info.telecom.mobile.number</em></td> <td>personal cell phone</td></tr> <tr><td><em>user.home-info.telecom.telephone.number</em></td> <td>personal line number</td></tr> <tr><td><em>user.home-info.online.email</em></td> <td>personal email</td></tr> <tr><td><em>user.home-info.online.uri</em></td> <td>personal page</td></tr> <tr><td><em>user.business-info.postal.name</em></td> <td>office address</td></tr> <tr><td><em>user.business-info.postal.city</em></td> <td>office address</td></tr> <tr><td><em>user.business-info.postal.stateprov</em></td> <td>office address</td></tr> <tr><td><em>user.business-info.postal.postalcode</em></td> <td>office postal code</td></tr> <tr><td><em>user.business-info.postal.country</em></td> <td>office postal country</td></tr> <tr><td><em>user.business-info.telecom.mobile.number</em></td> <td>office mobile number</td></tr> <tr><td><em>user.business-info.telecom.telephone.number</em></td> <td>office landline number</td></tr> <tr><td><em>user.business-info.online.email</em></td> <td>business email</td></tr> <tr><td><em>user.business-info.online.uri</em></td> <td>business page</td></tr></tbody></table> <h5 id="placeholder-a-note-for-openldap"><a href="#placeholder-a-note-for-openldap" class="header-anchor">#</a> Placeholder - A note for OpenLDAP</h5> <p>Ruled by OpenLDAP default <em>core</em> schema, the <em>member</em> attribute is a MUST attribute of <em>groupOfNames</em> objectClass:</p> <div class="language-text extra-class"><pre class="language-text"><code>    objectclass ( 2.5.6.9 NAME 'groupOfNames'
        DESC 'RFC2256: a group of names (DNs)'
        SUP top STRUCTURAL
        MUST ( member $ cn )
        MAY ( businessCategory $ seeAlso $ owner $ ou $ o $ description ) )
</code></pre></div><p>Therefore, PicketLink IDM uses a <strong>placeholder</strong> entry as a fake member in the creation of a groupOfNames. The placeholder DN should be configured as an option of any group type:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-object-type</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>platform_type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>options</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>parentMembershipAttributePlaceholder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ou=placeholder,o=portal,o=gatein,dc=example,dc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      ...  
</code></pre></div><h2 id="frequently-asked-questions"><a href="#frequently-asked-questions" class="header-anchor">#</a> Frequently asked questions</h2> <ol><li><p><strong>Q1- How does Directory get ready for integration?</strong></p> <p><strong>Answer:</strong> Not any condition except that the top DN should be created before being integrated.
You should ensure that the Directory contains an entry like the following:</p> <div class="language-text extra-class"><pre class="language-text"><code>   dn: dc=example,dc=com
   objectClass: top
   objectClass: domain
   dc: example
</code></pre></div></li> <li><p><strong>Q2- How to enable sign-in for LDAP pre-existing users?</strong></p> <p><strong>Answer:</strong> LDAP users are visible in the <code>User and Group Administration pages</code> but they are unable to sign in eXo Platform. More exactly, they do not have access permission to any pages.
Additional steps should be done to allow them to sign in</p> <ul><li><strong>Manually add users to the appropriate groups</strong> It is performed in the <code>User and Group Administration pages</code>.Just go to this page and add users to appropriate groups. The <strong>/platform/users</strong> group is mandatory to access the <em>dw</em> site.</li></ul></li> <li><p><strong>Q3- How to configure PicketLink to look up users in an entire tree?</strong></p> <p><strong>Answer:</strong> The default configuration already look up users in an entire tree. This behavior can be modified by updating the properties <code>exo.ldap.users.search.scope</code> in the file <code>exo.properties</code>:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">  exo.ldap.users.search.scope</span><span class="token punctuation">=</span><span class="token value attr-value">one</span>
</code></pre></div><p>In the case the PicketLink configuration is used, the following option must be used:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>entrySearchScope<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>subtree<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>See more details at <code>PicketLink IDM configuration</code>.</p></li> <li><p><strong>Q4- Cannot log into eXo Platform: error code 49</strong></p> <p><strong>Answer:</strong> This may happen with OpenLDAP, when users are created successfully but they cannot login, and there is error code 49 in your LDAP log as follows:</p> <div class="language-text extra-class"><pre class="language-text"><code> 5630e5ba conn=1002 op=0 BIND dn=&quot;uid=firstuser,ou=People,o=portal,o=gatein,dc=steinhoff,dc=com&quot; method=128
 5630e5ba do_bind: version=3 dn=&quot;uid=firstuser,ou=People,o=portal,o=gatein,dc=steinhoff,dc=com&quot; method=128
 5630e5ba ==&gt; bdb_bind: dn: uid=firstuser,ou=People,o=portal,o=gatein,dc=steinhoff,dc=com
 5630e5ba bdb_dn2entry(&quot;uid=firstuser,ou=people,o=portal,o=gatein,dc=steinhoff,dc=com&quot;)
 5630e5ba =&gt; access_allowed: result not in cache (userPassword)
 5630e5ba =&gt; access_allowed: auth access to &quot;uid=firstuser,ou=People,o=portal,o=gatein,dc=steinhoff,dc=com&quot; &quot;userPassword&quot; requested
 5630e5ba =&gt; dn: [1]
 5630e5ba &amp;lt;= acl_get: done.
 5630e5ba =&gt; slap_access_allowed: no more rules
 5630e5ba =&gt; access_allowed: no more rules
 5630e5ba send_ldap_result: conn=1002 op=0 p=3
 5630e5ba send_ldap_result: err=49 matched=&quot;&quot; text=&quot;&quot;
 5630e5ba send_ldap_response: msgid=1 tag=97 err=49
</code></pre></div><p>To resolve this, add an ACL (Access Control List) rule in the <code>slapd.conf</code> file as below:</p> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token comment"># Access and Security Restrictions (Most restrictive entries first)</span>
 access to <span class="token assign-left variable">attrs</span><span class="token operator">=</span>userPassword
     by self <span class="token function">write</span>   
     <span class="token comment">## by dn.sub=&quot;ou=admin,dc=domain,dc=example&quot; read ## not mandatory, useful if you need grant a permission to a particular dn</span>
     by anonymous auth
     by <span class="token function">users</span> none
 access to * by * <span class="token builtin class-name">read</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/administration/indexing.html" class="prev">
        Indexing
      </a></span> <span class="next"><a href="/administration/oauth-integration.html">
        OAuth Integration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.566fc5fe.js" defer></script><script src="/assets/js/2.a6004e7f.js" defer></script><script src="/assets/js/1.298b45b6.js" defer></script><script src="/assets/js/26.781556fb.js" defer></script>
  </body>
</html>
