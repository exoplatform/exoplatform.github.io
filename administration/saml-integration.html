<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SAML Integration | eXo developers documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="eXo documentation">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.aefff845.css" as="style"><link rel="preload" href="/assets/js/app.566fc5fe.js" as="script"><link rel="preload" href="/assets/js/2.a6004e7f.js" as="script"><link rel="preload" href="/assets/js/1.298b45b6.js" as="script"><link rel="preload" href="/assets/js/36.08aae2f6.js" as="script"><link rel="prefetch" href="/assets/js/10.225b8ad6.js"><link rel="prefetch" href="/assets/js/11.fcfda894.js"><link rel="prefetch" href="/assets/js/12.8288d633.js"><link rel="prefetch" href="/assets/js/13.61c54a2f.js"><link rel="prefetch" href="/assets/js/14.c8220840.js"><link rel="prefetch" href="/assets/js/15.cf0e000a.js"><link rel="prefetch" href="/assets/js/16.12acf4f0.js"><link rel="prefetch" href="/assets/js/17.60e99e03.js"><link rel="prefetch" href="/assets/js/18.402065f0.js"><link rel="prefetch" href="/assets/js/19.4cde00c8.js"><link rel="prefetch" href="/assets/js/20.e735bd74.js"><link rel="prefetch" href="/assets/js/21.4d9631b7.js"><link rel="prefetch" href="/assets/js/22.38c3a0bb.js"><link rel="prefetch" href="/assets/js/23.96cba659.js"><link rel="prefetch" href="/assets/js/24.6a323bb6.js"><link rel="prefetch" href="/assets/js/25.d314e852.js"><link rel="prefetch" href="/assets/js/26.781556fb.js"><link rel="prefetch" href="/assets/js/27.db2034f7.js"><link rel="prefetch" href="/assets/js/28.bdd32a1a.js"><link rel="prefetch" href="/assets/js/29.7705a494.js"><link rel="prefetch" href="/assets/js/3.535cbfb5.js"><link rel="prefetch" href="/assets/js/30.5235d8d8.js"><link rel="prefetch" href="/assets/js/31.12dc91a0.js"><link rel="prefetch" href="/assets/js/32.7b9193b7.js"><link rel="prefetch" href="/assets/js/33.d786c476.js"><link rel="prefetch" href="/assets/js/34.82a8e2bb.js"><link rel="prefetch" href="/assets/js/35.bfed5ce5.js"><link rel="prefetch" href="/assets/js/37.7c5839ea.js"><link rel="prefetch" href="/assets/js/38.5a9c6f81.js"><link rel="prefetch" href="/assets/js/39.64b36a7a.js"><link rel="prefetch" href="/assets/js/4.36aa3fdb.js"><link rel="prefetch" href="/assets/js/40.91490da1.js"><link rel="prefetch" href="/assets/js/41.1bb028a9.js"><link rel="prefetch" href="/assets/js/42.2b2e6226.js"><link rel="prefetch" href="/assets/js/43.3eb1d2ff.js"><link rel="prefetch" href="/assets/js/44.aff75618.js"><link rel="prefetch" href="/assets/js/45.ae4c3883.js"><link rel="prefetch" href="/assets/js/46.c22a02ed.js"><link rel="prefetch" href="/assets/js/47.c2a86641.js"><link rel="prefetch" href="/assets/js/48.49f8e4ff.js"><link rel="prefetch" href="/assets/js/49.ef6e633d.js"><link rel="prefetch" href="/assets/js/5.8d70814d.js"><link rel="prefetch" href="/assets/js/50.82b2cb38.js"><link rel="prefetch" href="/assets/js/51.26af3c19.js"><link rel="prefetch" href="/assets/js/52.f2d45ccb.js"><link rel="prefetch" href="/assets/js/53.ecd43fd3.js"><link rel="prefetch" href="/assets/js/54.17169cc4.js"><link rel="prefetch" href="/assets/js/55.12746217.js"><link rel="prefetch" href="/assets/js/56.77bdaee4.js"><link rel="prefetch" href="/assets/js/57.0b269ef5.js"><link rel="prefetch" href="/assets/js/58.f7328ad9.js"><link rel="prefetch" href="/assets/js/59.5a4f9f04.js"><link rel="prefetch" href="/assets/js/6.477d5345.js"><link rel="prefetch" href="/assets/js/60.30d9251f.js"><link rel="prefetch" href="/assets/js/61.8b948aa3.js"><link rel="prefetch" href="/assets/js/62.5a0f0c07.js"><link rel="prefetch" href="/assets/js/63.e454eff4.js"><link rel="prefetch" href="/assets/js/64.a49d269e.js"><link rel="prefetch" href="/assets/js/65.bfc4b138.js"><link rel="prefetch" href="/assets/js/66.25150fb5.js"><link rel="prefetch" href="/assets/js/67.f5cc4cec.js"><link rel="prefetch" href="/assets/js/68.765560e5.js"><link rel="prefetch" href="/assets/js/69.1b311bba.js"><link rel="prefetch" href="/assets/js/7.75df615e.js"><link rel="prefetch" href="/assets/js/70.1d2c355e.js"><link rel="prefetch" href="/assets/js/71.764ddbf9.js"><link rel="prefetch" href="/assets/js/72.45bf8487.js"><link rel="prefetch" href="/assets/js/73.5834c41d.js"><link rel="prefetch" href="/assets/js/74.981741a8.js"><link rel="prefetch" href="/assets/js/75.60c0af0f.js"><link rel="prefetch" href="/assets/js/76.44b7b182.js"><link rel="prefetch" href="/assets/js/77.d4e20165.js"><link rel="prefetch" href="/assets/js/78.c33db6b5.js"><link rel="prefetch" href="/assets/js/79.c55e2cf6.js"><link rel="prefetch" href="/assets/js/80.3da0ce0e.js"><link rel="prefetch" href="/assets/js/81.09e71458.js"><link rel="prefetch" href="/assets/js/82.d36b7bb4.js"><link rel="prefetch" href="/assets/js/83.102fdcea.js"><link rel="prefetch" href="/assets/js/84.8a64b178.js"><link rel="prefetch" href="/assets/js/85.fed6c251.js"><link rel="prefetch" href="/assets/js/86.70751800.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f3569c9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aefff845.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">eXo developers documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/getting-started/Introduction.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/administration/" class="nav-link router-link-active">
  Technical Administration
</a></div><div class="nav-item"><a href="/guide/developer-guide/rest-api.html" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="https://github.com/exoplatform/exo-community/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Q&amp;A
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/administration/" class="sidebar-heading clickable router-link-active open"><span>Technical Administration Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/administration/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/administration/database.html" class="sidebar-link">Database</a></li><li><a href="/administration/backup-restore.html" class="sidebar-link">Backup and Restore</a></li><li><a href="/administration/indexing.html" class="sidebar-link">Indexing</a></li><li><a href="/administration/LDAP.html" class="sidebar-link">LDAP Integration</a></li><li><a href="/administration/oauth-integration.html" class="sidebar-link">OAuth Integration</a></li><li><a href="/administration/saml-integration.html" aria-current="page" class="active sidebar-link">SAML Integration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/administration/saml-integration.html#exo-platform-as-saml2-sp" class="sidebar-link">eXo Platform as SAML2 SP</a></li><li class="sidebar-sub-header"><a href="/administration/saml-integration.html#generating-and-using-your-own-keystore" class="sidebar-link">Generating and using your own keystore</a></li></ul></li><li><a href="/administration/addons-management.html" class="sidebar-link">Add-ons Management</a></li><li><a href="/administration/security.html" class="sidebar-link">Security</a></li><li><a href="/administration/jmx-rest-management.html" class="sidebar-link">JMX/REST Management</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="saml-integration"><a href="#saml-integration" class="header-anchor">#</a> SAML Integration</h1> <p>SAML2 is version 2 of SAML (Security Assertion Markup Language), an XML-based standard for exchanging authentication and authorization data. The document of SAML2 Specifications is available <a href="http://saml.xml.org/saml-specifications" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>According to SAML2 Specifications, two parties which exchange
authentication and authorization data are called SP (Service Provider)
and IDP (Identity Provider). IDP issues the security assertion and SP
consumes it. The following scenario describes a SAML2 exchange:</p> <ol><li>A user, via web browser, requests a resource at the SP.</li> <li>The SP checks and finds no security context for the request, then it
redirects to the SSO service.</li> <li>The browser requests the SSO service at IDP.</li> <li>The IDP responds with an XHTML form after performing security check and
identifying the user. The form contains SAMLResponse value.</li> <li>The browser requests assertion consumer service at the SP.</li> <li>The consumer service processes the SAMLResponse, creates a security
context and redirects to the target resource.</li> <li>The browser requests target resource again.</li> <li>The SP finds a security context, so it returns the target resource.</li></ol> <p><img src="/img/saml/saml-sequence.png" alt="image0"></p> <p>eXo Platform SAML integration supports the SP role thus can be
integrated with various <a href="https://en.wikipedia.org/wiki/SAML-based_products_and_services" target="_blank" rel="noopener noreferrer">IdP providers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
such as Salesforce or Shibboleth.</p> <p>This chapter covers the following subjects:</p> <ul><li><p><a href="#exo-platform-as-saml2-sp">eXo Platform as SAML2 SP</a></p></li> <li><p><a href="#generating-and-using-your-own-keystore">Generating and using your own keystore</a></p></li></ul> <h2 id="exo-platform-as-saml2-sp"><a href="#exo-platform-as-saml2-sp" class="header-anchor">#</a> eXo Platform as SAML2 SP</h2> <ol><li>Install SAML2 add-on with the command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$PLATFORM_SP</span>/addon <span class="token function">install</span> exo-saml
</code></pre></div><ol start="2"><li>Open the file <code>$PLATFORM_SP/gatein/conf/exo.properties</code>.</li></ol> <p>Edit the following properties (add them if they don't exist):</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># SSO</span>
<span class="token key attr-name">gatein.sso.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">gatein.sso.saml.sp.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">gatein.sso.callback.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">gatein.sso.valve.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">gatein.sso.valve.class</span><span class="token punctuation">=</span><span class="token value attr-value">org.gatein.sso.saml.plugin.valve.ServiceProviderAuthenticator</span>
<span class="token key attr-name">gatein.sso.filter.login.sso.url</span><span class="token punctuation">=</span><span class="token value attr-value">/portal/dologin</span>

<span class="token key attr-name">gatein.sso.filter.initiatelogin.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">gatein.sso.filter.logout.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">gatein.sso.filter.logout.class</span><span class="token punctuation">=</span><span class="token value attr-value">org.gatein.sso.saml.plugin.filter.SAML2LogoutFilter</span>
<span class="token key attr-name">gatein.sso.filter.logout.url</span><span class="token punctuation">=</span><span class="token value attr-value">${gatein.sso.sp.url}?GLO=true </span>
<span class="token key attr-name">gatein.sso.saml.config.file</span><span class="token punctuation">=</span><span class="token value attr-value">${exo.conf.dir}/saml2/picketlink-sp.xml</span>

<span class="token comment"># Custom properties</span>

<span class="token key attr-name">gatein.sso.sp.host</span><span class="token punctuation">=</span><span class="token value attr-value">SP_HOSTNAME</span>
<span class="token key attr-name">gatein.sso.sp.url</span><span class="token punctuation">=</span><span class="token value attr-value">${gatein.sso.sp.host}/portal/dologin</span>
<span class="token key attr-name">gatein.sso.idp.host</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_HOSTNAME</span>
<span class="token key attr-name">gatein.sso.idp.url</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_SAML_ENDPOINT</span>
<span class="token key attr-name">gatein.sso.idp.url.logout</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_SAML_ENDPOINT_LOGOUT</span>
<span class="token key attr-name">gatein.sso.idp.alias</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_SIGNING_ALIAS</span>
<span class="token key attr-name">gatein.sso.idp.signingkeypass</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_SIGNING_KEY_PASS</span>
<span class="token key attr-name">gatein.sso.idp.keystorepass</span><span class="token punctuation">=</span><span class="token value attr-value">IDP_KEYSTORE_PASS</span>
<span class="token comment"># WARNING: This bundled keystore is only for testing purposes. You should generate and use your own keystore!</span>
<span class="token key attr-name">gatein.sso.picketlink.keystore</span><span class="token punctuation">=</span><span class="token value attr-value">${exo.conf.dir}/saml2/jbid_test_keystore.jks</span>
</code></pre></div><p>You need to modify <strong>gatein.sso.idp.host</strong>, <strong>gatein.sso.idp.url</strong>, <strong>gatein.sso.idp.url.logout</strong>, <strong>gatein.sso.idp.alias</strong>, <strong>gatein.sso.idp.signingkeypass</strong> and <strong>gatein.sso.idp.keystorepass</strong> according to your environment setup. You also need to install your own keystore as instructed in <a href="#generating-and-using-your-own-keystore">Generating and using your own keystore</a>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If your IDP send username in assertion with some char in capital letter, and you want to force lower case, you can add this property :</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">gatein.sso.saml.username.forcelowercase</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre></div><ol start="3"><li>Download and import your generated IDP certificate to your keystore
using this command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-keystore</span> <span class="token variable">$PLATFORM_SP</span>/gatein/conf/saml/jbid_test_keystore.jks <span class="token parameter variable">-file</span> idp-certificate.crt <span class="token parameter variable">-alias</span> Identity_Provider-idp
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The Default password of the keystore jbid_test_keystore.jks is <strong>store123</strong>.</p> <ol start="4"><li>Start up the platform: use the following command on Linux operating systems:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>./start_eXo.sh
</code></pre></div><p>and use this command for Windows operating systems:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>start_eXo.bat
</code></pre></div><h2 id="generating-and-using-your-own-keystore"><a href="#generating-and-using-your-own-keystore" class="header-anchor">#</a> Generating and using your own keystore</h2> <p>The default <code>jbid_test_keystore.jks</code> is useful for testing purpose,
but in eXo Platform you need to generate and use your own keystore as
follows:</p> <ol><li>Generate your file using the <strong>keytool</strong> command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-alias</span> secure-key <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keystore</span> secure-keystore.jks
</code></pre></div><p>You will be asked to enter a <em>keystore password</em> and a <em>key password</em>.
Remember them to use in next steps.
This command create a couple (publicKey, privateKey). During IDP configuration, you can provide the publicKey to the IDP, which will use is to encode the assertion content.
Then, when eXo receive the assertion, it uses the privateKey present in the keystore to decode the assertion.</p> <ol start="2"><li><p>Install your file to
<code>PLATFORM_*/gatein/conf/saml2/</code></p></li> <li><p>Modify picketlink configuration properties to provide your <strong>keystore
password</strong> and a <strong>key password</strong>. In exo.properties file, change properties</p></li></ol> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">gatein.sso.idp.alias</span><span class="token punctuation">=</span><span class="token value attr-value">fellowtest</span>
<span class="token key attr-name">gatein.sso.idp.keystorepass</span><span class="token punctuation">=</span><span class="token value attr-value">store123</span>
<span class="token key attr-name">gatein.sso.idp.signingkeypass</span><span class="token punctuation">=</span><span class="token value attr-value">password</span>
<span class="token key attr-name">gatein.sso.picketlink.keystore</span><span class="token punctuation">=</span><span class="token value attr-value">${exo.conf.dir}/saml2/jbid_test_keystore.jks</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>On Windows, you should use the absolute link to the keystore file, for the property <code>gatein.sso.picketlink.keystore</code>.</p></div></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/administration/oauth-integration.html" class="prev">
        OAuth Integration
      </a></span> <span class="next"><a href="/administration/addons-management.html">
        Add-ons Management
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.566fc5fe.js" defer></script><script src="/assets/js/2.a6004e7f.js" defer></script><script src="/assets/js/1.298b45b6.js" defer></script><script src="/assets/js/36.08aae2f6.js" defer></script>
  </body>
</html>
